//+------------------------------------------------------------------+
//|                                  Yevheniy Kopanitskyy            |
//|                                      ROOT UTILITY    v 4.1.0.mq4 |
//|                                                                  |
//+------------------------------------------------------------------+


#property copyright "Yevheniy Kopanitskyy"
#property link      "x4723312d "
#property version   "4.1"
#property strict
#include <WinUser32.mqh>
datetime time_bar,time_BR,Bar_Tm=0;
//---- Версия советника со скрытым профитом
string ChartExpertName="Root-Utility-Diamond-Tester";
bool TreilStop=true;
int shoulder=500;
bool arrowind=false;
extern bool PI_LINES=false;
extern bool TicketsManual=false;
//double body[90000,50];
//datetime bodydt[90000];//массив для записи времени
//---Набор string переменных
double LevelsAr[25];//Массив для загрузки цен сигнала
int LevelsArInd[25];//Массив для загрузки indikatora
string binarraywriteBUY="binarraywriteBUY";
string binarraywriteSELL="binarraywriteSELL";
string DateTimeTrade="DateTimeTrade";
string Fibanachi="Fibanachi";
double LongTackeProfit;
double ShortTackeProfit;
string TP5="TP5";
string TP8="TP8";
string TP13="TP13";
string TP21="TP21";
string SL0="SL0";
string SL_2="SL-2";
string SL_1="SL-1";
string SL1="SL1";
string SL2="SL2";
string SL3="SL3";
string SL5="SL5";
string SL8="SL8";
string SL13="SL13";
int Counter=0;
int Handle;
string Coment;
int Handl_SZ;
int indBoolN=0;
int indBearN;
int pincode=0;
int x;
string windowsnumber;
int Counter1;
int Counter1_1;
int Counter0;
int Counter0_1;
int Counter_Summa1;
int Counter_Summa0;
int SHIFT;
int Buy_Lots=1,Sell_Lots=1;
int BuyCountH1,SellCountH1,BuyCountH2,SellCountH2,BuyCountH3,SellCountH3,BuyCountH4,SellCountH4,BuyCountH5,SellCountH5,BuyCountH6,SellCountH6,BuyCountH7,SellCountH7,BuyCountH8,SellCountH8,BuyCountH9,SellCountH9,BuyCountH10,SellCountH10,BuyCountH11,SellCountH11,BuyCountH12,SellCountH12,BuyCountH13,SellCountH13,BuyCountH14,SellCountH14,BuyCountH15,SellCountH15,BuyCountH16,SellCountH16;
int Slippage=1;
string buybutton;
string sellbutton;
bool buystate;
bool sellstate;
string FileName4="Errors.txt";
int errorcode;
int WriteDatatuDB=0;
int ib;
//---Набор Внешних Переменных
datetime bar_time=D'2018.08.06 00:00';
double Level=0;
bool AutoVolumen=false;
bool imagepaint=false;
bool errorswrite=false;
int magikchange=0;//изменениые магика
double LotsVolumen2=0.01;
int NormalizaDigi=5;
double volumendeorderB1;
bool Dummy=false;
bool OrdChek;
bool changedress=false;
double Objetivo=6000;//objective
double inicial=600;//Initial Deposit
double lastwithdrawa=0;//Последний вывод средств
bool ShowCandles=false;
bool ShowSlides=false;
bool TRAILSTOP=false;
bool threeout=false;//salida al 4 tiket
int  spredpoints=15;
bool logo=false;
bool euroslider=false;
bool analitica=true;
bool fotos=false;
string strdates="453 30.03";
double m1price=470;//precio M2
bool terreno=false;
bool var1=true;//1 расчёт
bool onInit=false;//
bool fibolines=true;//
bool tp9=false;
bool fixedlevel=false;
int deopsitpercent=100;
bool FibaTimeLines=false;
bool ticketsadded=false;
string dummyclosepryce,dummystoploss,dummyopenprice,Pausa;
double stoppoints;
double DeposittoTrade;
double ICalculateStopfortrade1;
double ICalculateStopfortrade2;
double ICalculateStopfortrade3;
double ICalculateStopfortrade4;
double ICalculateStopfortrade5;
double ICalculateStopfortrade6;
double ICalculateStopfortrade7;
double ICalculateStopfortrade8;
double ICalculateStopfortrade9;
double ICalculateStopfortrade10;
double ICalculateStopfortrade11;
double ICalculateStopfortrade12;
double ICalculateStopfortrade13;
double ICalculateStopfortrade14;
double resultado1;
double LoTstoTrade;
//extern bool BUY=false;//------BUY  По рынку -----
//extern bool SELL=false;//------SELL По рынку -----
extern int text;//--------Ветка BUY------------------------------
extern int ManualIHaveticketBuy1=0;
extern int ManualIHaveticketSell2=0;
extern int ManualIHaveticketBuy3=0;
extern int ManualIHaveticketSell4=0;
extern int ManualIHaveticketBuy5=0;
extern int ManualIHaveticketSell6=0;
extern int ManualIHaveticketBuy7=0;
int IHaveticketBuy1=0;
int IHaveticketSell2=0;
int IHaveticketBuy3=0;
int IHaveticketSell4=0;
int IHaveticketBuy5=0;
int IHaveticketSell6=0;
int IHaveticketBuy7=0;
int IHaveticketSell8=0;
int IHaveticketSell9=0;
int IHaveticketBuy10=0;
int IHaveticketSell11=0;
int IHaveticketBuy12=0;
int IHaveticketSell13=0;
int IHaveticketBuy14=0;
extern int text1; //---------Ветка SELL--------------------------
extern int ManualIHaveticketSell1=0;
extern int ManualIHaveticketBuy2=0;
extern int ManualIHaveticketSell3=0;
extern int ManualIHaveticketBuy4=0;
extern int ManualIHaveticketSell5=0;
extern int ManualIHaveticketBuy6=0;
extern int ManualIHaveticketSell7=0;
int IHaveticketSell1=0;
int IHaveticketBuy2=0;
int IHaveticketSell3=0;
int IHaveticketBuy4=0;
int IHaveticketSell5=0;
int IHaveticketBuy6=0;
int IHaveticketSell7=0;
int IHaveticketBuy8=0;
int IHaveticketBuy9=0;
int IHaveticketSell10=0;
int IHaveticketBuy11=0;
int IHaveticketSell12=0;
int IHaveticketBuy13=0;
int IHaveticketSell14=0;
long CHWPX;
double LEVELUP=0;
double LEVELDOWN=0;
double FIBAUP300=0;
double FIBADOWN300=0;
double SellStop=0;
double BuyStop=0;
double TPBuy=0;
double TPSell=0;
bool manualvolumen=false;
double LotsVolumen=0.00;
//---Набор Тетрадей

string FileName3="AddedSignals.txt";
string SYmbol=Symbol();
string FileName5=SYmbol+" indexarray.bin";
string FileName6=SYmbol+" alltoarray.bin";
//---
//---Набор Магик Намеров
int MagicBUY=031726+magikchange;
int MagicSELL=031727+magikchange;
int MagicBUYSTOP=031728+magikchange;
int MagicSELLSTOP=031729+magikchange;
int MagicBUYSTOP1=031730+magikchange;
int MagicSELLSTOP1=031731+magikchange;
int MagicBUYSTOP2=031732+magikchange;
int MagicSELLSTOP2=031733+magikchange;
int MagicBUYSTOP3=031734+magikchange;
int MagicSELLSTOP3=031735+magikchange;
int MagicBUYSTOP4=031736+magikchange;
int MagicSELLSTOP4=031737+magikchange;
int MagicBUYSTOP5=031738+magikchange;
int MagicSELLSTOP5=031739+magikchange;
int MagicBUYSTOP6=031740+magikchange;
int MagicSELLSTOP6=031741+magikchange;
int MagicBUYSTOP7=031742+magikchange;
int MagicSELLSTOP7=031743+magikchange;
int MagicBUY8=031744+magikchange;
int MagicSELL8=031745+magikchange;
int MagicBUY9=031746+magikchange;
int MagicSELL9=031747+magikchange;
int MagicBUY10=0317448+magikchange;
int MagicSELL10=031749+magikchange;
int MagicBUY11=031750+magikchange;
int MagicSELL11=031751+magikchange;
int MagicBUY12=031752+magikchange;
int MagicSELL12=031753+magikchange;
int MagicBUY13=031754+magikchange;
int MagicSELL13=031755+magikchange;
int MagicBUY14=031756+magikchange;
int MagicSELL14=031757+magikchange;

//---Набор Бул переменных
bool GetError;
bool write=false;
bool writeall=false;
/*extern*/ //bool PerMaket=false;//По Рынку
/*extern*/ //bool SigBUY=false;
/*extern*/// bool SigSELL=false;
/*extern*/// bool STOP=false;//Стоп по Рынку
/*extern*/// bool BUYSTOP=false;
/*extern*/// bool SELLSTOP=false;
/*extern*/// bool LIMIT=false;//Лимит против Рынка
/*extern*/// bool BUYLIMIT=false;
/*extern*/// bool SELLLIMIT=false;
//----Ращёт стоплос к профиту 1/2
//int lotmultiplayer1=1;//4/3//2+1=3
//int lotmultiplayer2=2;//14/10/=13//1+2+4=7
//int lotmultiplayer3=3;//48/30/41//1+2+4+8=15
//int lotmultiplayer4=4;//164/90/129//1+2+4+8+16=
//int lotmultiplayer5=6;//565/270/406//1+2+4+8+16+32=63
//int lotmultiplayer6=9;//1949/810/1218//1+2+4+8+16+32+64=
//int lotmultiplayer7=14;//1949/810/1218
//----Ращёт стоплос к профиту 1/4 okno 1
int lotmultiplayer1=1;//4/3//2+1=3
int lotmultiplayer2=1;//14/10/=13//1+2+4=7
int lotmultiplayer3=2;//48/30/41//1+2+4+8=15
int lotmultiplayer4=4;//164/90/129//1+2+4+8+16=
int lotmultiplayer5=5;//565/270/406//1+2+4+8+16+32=63
int lotmultiplayer6=6;//1949/810/1218//1+2+4+8+16+32+64=
int lotmultiplayer7=7;//1949/810/1218

//int lotmultiplayer8=4;
//int lotmultiplayer9=5;
//int lotmultiplayer10=6;
//int lotmultiplayer11=7;
//int lotmultiplayer12=9;
//int lotmultiplayer13=11;

//----Ращёт стоплос к профиту 1/4 okno 2
int lotmultiplayer1_1=1;//4/3//2+1=3
int lotmultiplayer2_1=3;//14/10/=13//1+2+4=7
int lotmultiplayer3_1=8;//48/30/41//1+2+4+8=15
int lotmultiplayer4_1=20;//164/90/129//1+2+4+8+16=
int lotmultiplayer5_1=25;//565/270/406//1+2+4+8+16+32=63
int lotmultiplayer6_1=31;//1949/810/1218//1+2+4+8+16+32+64=
int lotmultiplayer7_1=38;//1949/810/1218
//int lotmultiplayer8=4;
//int lotmultiplayer9=5;
//int lotmultiplayer10=6;
//int lotmultiplayer11=7;
//int lotmultiplayer12=9;
//int lotmultiplayer13=11;
//----------
//--Набор  Дабл Переменных

double TPSell1,TPSell2,TPSell3,TPSell4,TPBuy1,TPBuy2,TPBuy3,TPBuy4,SLSell1,SLSell2,SLSell3,SLSell4,SLBuy1,SLBuy2,SLBuy3,SLBuy4;
double MultiplSell1,MultiplSell2,MultiplSell3,MultiplSell4,MultiplBuy1,MultiplBuy2,MultiplBuy3,MultiplBuy4;
double Str_Pr_Bar=0;

double plavuravVerh;
double plavuravNiz;
double plavuravVerh2;
double plavuravNiz2;
double plavuravVerh3;
int changeb2,changeb3,changeb4,changeb5,changeb6,changeb7,changeb8,changeb9,changeb10,changeb11,changeb12,changeb13,changeb14,changes2,changes3,changes4,changes5,changes6,changes7,changes8,changes9,changes10,changes11,changes12,changes13,changes14;
double plavuravNiz3;
double BUY38_2;
double SELL38_2;
double BUY50;
double SELL50;
double BUY61_8;
double SELL61_8;
double BUY161_8;
double SELL161_8;
double FIbaUP100;
double FIbaDOWN100;
double FIbaUP123_6;
double FIbaDOWN123_6;
double FIBAUP100;
double FIBADOWN100;
datetime TimLine1Date;
double TPBuy_50persent;
double TPSell_50persent;
double TPBuy_75persent;
double TPSell_75persent;
double Depozit;
double Spred;
string dummyshort;
double STOPLOSSBUY;
double STOPLOSSSELL;
double TPBUY_SELLSTOP;
double TPSELL_BUYSTOP;

double HIGHT;
double LOW;
double CLOSE;
double OPEN;
double normalLevel;
double center;
double LOT;

string obiektslcurrent;
string UPLINE="UPLINE";
string DOWNLINE="DOWNLINE";
string VERTICALLINE="VERTICALLINE";
string UP_61="UP_61";
string DOWN_61="DOWN_61";
string UP_38_2="UP_38_2";
string DOWN_38_2="DOWN_38_2";
string UP_50="UP_50";
string DOWN_50="DOWN_50";
string UP_100="UP_100";
string DOWN_100="DOWN_100";
string UP_161_8="UP_161_8";
string DOWN_161_8="DOWN_161_8";
string UP_261_8="UP_261_8";
string DOWN_261_8="DOWN_261_8";
string UP_423_6="UP_423_6";
string DOWN_423_6="DOWN_423_6";
string CENTER="CENTER";
string PlavUravenVerh="PlavUravenVerh";
string PlavUravenNiz="PlavUravenNiz";
string PlavUravenVerh2="PlavUravenVerh2";
string PlavUravenNiz2="PlavUravenNiz2";
string PlavUravenVerh3="PlavUravenVerh3";
string PlavUravenNiz3="PlavUravenNiz3";
string Vertikal1="Vertikal1";
string Label1="Label1";
string FIBAup100="FIBAup100";
string FIBAdown100="FIBAdown100";
string FIBAup300="FIBAup300";
string FIBAdown300="FIBAdown300";
string FIBAup400="FIBAup400";
string FIBAdown400="FIBAdown400";
string FIBAupplus="FIBAupplus";
string FIBAdownplus="FIBAdownplus";
string BUYSTOP="BUYSTOP";
string SELLSTOP="SELLSTOP";
string TPBUY="TPBUY";
string TPSELL="TPSELL";
string HIGHTplus="HIGHTplus";
string LOWminus="LOWminus";
string Obiektvremya;
string ObiektT;
string AutoVolum;
string ManualVolum;
string ObiektLevelpole;
string Start;
string Start1;
string Start2;
string Obiekt5001,Obiekt5002,Obiekt5003;
int obiektVolumenpole;
string ObiektVolumenpole;
string AutoLevel;
bool Startstate;
bool Start1state;
bool Start2state;
bool AutoLevelstate;
bool AutoVolumstate;
bool ManualVolumstate;
bool resetstate;
int CandlesWhite;
int CandlesBlack;
int CandlesDoji;
//---Кнопки для тикетов-----
string ShowTicketsbutton;
bool ShowTicketsstate;
string ShowTicketsBUYbutton;
string textShowTicketsBUYbutton;
bool ShowTicketsBUYbuttonstate;
string ShowTicketsSELLbutton;
string textShowTicketsSELLbutton;
bool ShowTicketsSELLbuttonstate;
string dummyvolumen;
string ObiektTicketSell1;
string ObiektTicketBuy2;
string ObiektTicketSell3;
string ObiektTicketBuy4;
string ObiektTicketSell5;
string ObiektTicketBuy6;
string ObiektTicketSell7;
//---------------------
string ObiektTicketBuy1;
string ObiektTicketSell2;
string ObiektTicketBuy3;
string ObiektTicketSell4;
string ObiektTicketBuy5;
string Obiekt500,Obiekt501,Obiekt502,Obiekt503,Obiekt504,Obiekt505,Obiekt506,Obiekt507,Obiekt508,Obiekt509,Obiekt510,Obiekt511,Obiekt512,Obiekt513,Obiekt514,Obiekt515,Obiekt516,Obiekt518,Obiekt519,Obiekt520,Obiekt521,Obiekt522,Obiekt523,Obiekt524,Obiekt525,Obiekt526,Obiekt527,Obiekt528,Obiekt529,Obiekt530,Obiekt531,Objetivo531,Obiekt534,Obiekt544,Obiekt546,Obiekt545,Obiekt560,Obiekt561,Obiekt562,Obiekt704,Obiekt705,Obiekt706,Obiekt707,Obiekt708,Obiekt709,Obiekt710,Obiekt711,Obiekt712,Obiekt713,Obiekt714,Obiekt715,Obiekt716,Obiekt717,Obiekt718,Obiekt719,Obiekt720,Obiekt721,Obiekt722,Obiekt723,Obiekt724,Obiekt725,Obiekt726,Obiekt727,Obiekt728,Obiekt729,Obiekt730,Obiekt731,Obiekt732,Obiekt733;
int nolike1,nolike2,nolike3,nolike4,nolike5,nolike6,nolike7,directpermisbuy,directpermissell;
int PermicionB1_1,PermicionB1_2,PermicionB1_3,PermicionB1_4,PermicionB1_5,PermicionB1_6,PermicionB1_7,PermicionB2_1,PermicionB2_2,PermicionB2_3,PermicionB2_4,PermicionB3_1,PermicionB3_2,PermicionB3_3,PermicionB3_4,PermicionB4_1,PermicionB4_2,PermicionB4_3,PermicionB5_1,PermicionB5_2,PermicionB6_1,PermicionB7_1,PermicionB8_1;
int PermicionS1_1,PermicionS1_2,PermicionS1_3,PermicionS1_4,PermicionS1_5,PermicionS1_6,PermicionS1_7,PermicionS2_1,PermicionS2_2,PermicionS2_3,PermicionS2_4,PermicionS3_1,PermicionS3_2,PermicionS3_3,PermicionS3_4,PermicionS4_1,PermicionS4_2,PermicionS4_3,PermicionS5_1,PermicionS5_2,PermicionS6_1,PermicionS7_1,PermicionS8_1;
string ObiektTicketSell6;
string ObiektTicketBuy7;
string Accountprofit;
string Revers;
string pips;
string textpips;
string pipsprofit;
string textpipsprofit;
string finansbag;
string textfinansbag;
string objetivo;
string textobjetivo;
string reset;
string dojiCandles="539";
string whiteCandles="537";
string blackCandles="535";
int allowBuy1;
int allowBuy2;
int allowBuy3;
int allowBuy4;
int allowBuy5;
int allowBuy6;
int allowBuy7;
int allowSell1;
int allowSell2;
int allowSell3;
int allowSell4;
int allowSell5;
int allowSell6;
int allowSell7;
string CBstr;
string CWstr;
string CDj;
string fileslide1;
string Confidance;
string fileConfidance;
string Persent;
string filesmile;
int pointsMASELL1;
int pointsMASELL2;
int pointsMABUY1;
int pointsMABUY2;
int TotaltuADDtoSELLTEXT,TotaltuADDtoBUYTEXT;
int pointsRSIBUY1;
int pointsRSISELL1;
int pointsRSIBUY2;
int pointsRSISELL2;
int pointsRSIBUY3;
int pointsRSISELL3;
int pointsMACDBUY1;
int pointsMACDSELL1;
int pointsMACDBUY2;
int pointsMACDSELL2;
int pointsMACDBUY3;
int pointsMACDSELL3;
int pointsSTOCHSELL;
int pointsSTOCHBUY;
int IreceiveLevelresult;
datetime bartimeresult;
double STOPforBUY,STOPforSELL;
string StopOrders,MarketOrders,LimitOrders;
bool StopOrdersstate,MarketOrdersstate,LimitOrdersstate;
string sellbuttonLimit,buybuttonLimit,sellbuttonStop,buybuttonStop,kism;
string ObiektIndCompLineVert,ObiektIndCompLineGor,filefiveeuros,Obiekt700,Obiekt701,Obiekt702,RectanglLabel;
string ObjectFWBuy1TP,ObjectFWBuy1SL,ObjectFWSell1TP,ObjectFWSell1SL,ObjectFWBuy2TP,ObjectFWBuy2SL,ObjectFWBuy3TP,ObjectFWBuy3SL,ObjectFWBuy4TP,ObjectFWBuy4SL,ObjectFWBuy5TP,ObjectFWBuy5SL,ObjectFWBuy6TP,ObjectFWBuy6SL,ObjectFWBuy7TP,ObjectFWBuy7SL,ObjectFWSell2TP,ObjectFWSell2SL,ObjectFWSell3TP,ObjectFWSell3SL,ObjectFWSell4TP,ObjectFWSell4SL,ObjectFWSell5TP,ObjectFWSell5SL,ObjectFWSell6TP,ObjectFWSell6SL,ObjectFWSell7TP,ObjectFWSell7SL;
string Levelup_2="Levelup_2";
string Levelup_3="Levelup_3";
string Levelup_5="Levelup_5";
string Levelup_8="Levelup_8";
string Levelup_13="Levelup_13";
string Levelup_21="Levelup_21";
string Levelup_34="Levelup_34";
string Levelup_55="Levelup_55";
string Levelup_89="Levelup_89";
string Levelup_144="Levelup_144";
string Leveldown_2="Leveldown_2";
string Leveldown_3="Leveldown_3";
string Leveldown_5="Leveldown_5";
string Leveldown_8="Leveldown_8";
string Leveldown_13="Leveldown_13";
string Leveldown_21="Leveldown_21";
string Leveldown_34="Leveldown_34";
string Leveldown_55="Leveldown_55";
string Leveldown_89="Leveldown_89";
string Leveldown_144="Leveldown_144";
string Levelup_2_Label="Levelup_2_Label";
string Levelup_3_Label="Levelup_3_Label";
string Levelup_5_Label="Levelup_5_Label";
string Levelup_8_Label="Levelup_8_Label";
string Levelup_13_Label="Levelup_13_Label";
string Levelup_21_Label="Levelup_21_Label";
string Levelup_34_Label="Levelup_34_Label";
string Levelup_55_Label="Levelup_55_Label";
string Levelup_89_Label="Levelup_89_Label";
string Levelup_144_Label="Levelup_144_Label";
string Leveldown_2_Label="Leveldown_2_Label";
string Leveldown_3_Label="Leveldown_3_Label";
string Leveldown_5_Label="Leveldown_5_Label";
string Leveldown_8_Label="Leveldown_8_Label";
string Leveldown_13_Label="Leveldown_13_Label";
string Leveldown_21_Label="Leveldown_21_Label";
string Leveldown_34_Label="Leveldown_34_Label";
string Leveldown_55_Label="Leveldown_55_Label";
string Leveldown_89_Label="Leveldown_89_Label";
string Leveldown_144_Label="Leveldown_144_Label";
double StopLoss_StopEntranceBUY;
double StopLoss_StopEntranceSELL;
string StopLoss_StopEntranceBuy="StopLoss_StopEntranceBuy";
string StopLoss_StopEntranceSell="StopLoss_StopEntranceSell";
double platform_9_3_4_UP;
double platform_9_3_4_DOWN;
string Platform_9_3_4_UP="Platform_9_3_4_UP";
string Platform_9_3_4_DOWN="Platform_9_3_4_DOWN";
double IpaintFiboLineUP_2;
double IpaintFiboLineUP_3;
double IpaintFiboLineUP_5;
double IpaintFiboLineUP_8;
double IpaintFiboLineUP_13;
double IpaintFiboLineUP_21;
double IpaintFiboLineUP_34;
double IpaintFiboLineUP_55;
double IpaintFiboLineUP_89;
double IpaintFiboLineUP_144;

double IpaintFiboLineDOWN_2;
double IpaintFiboLineDOWN_3;
double IpaintFiboLineDOWN_5;
double IpaintFiboLineDOWN_8;
double IpaintFiboLineDOWN_13;
double IpaintFiboLineDOWN_21;
double IpaintFiboLineDOWN_34;
double IpaintFiboLineDOWN_55;
double IpaintFiboLineDOWN_89;
double IpaintFiboLineDOWN_144;
//+--------------------End----------------------------------------------+

//+------------------------------------------------------------------+
void OnInit()//Доступ в тело Инициализации разрешон

  {

// if(pincode!=111777){Alert( "Autentificacion Faild" ); return; }//Если Пин Код не соответсвует заданному параметру то доступ в тело функции запрещон.Вывод визуального оповещения
// if(AccountNumber()!=20446902 && Account){Alert( "Autentificacion Faild" );}return;//Если Номер Щета не соответсвует установленному значению то доступ в тело функци запрещон
//Comment("Hellow World");//test

//---инициализация Ранда
   MathSrand(1);//Устанавливается значение 1 для генерации ранжираваных чиесел
//--Обнуление переменных при запуске----
   if(ticketsadded==false) //Если добавление фактур равна правде то доступ в функцию разрешон
     {

      IHaveticketBuy1=0;//устанавливается значение. Фактуру на покупку 1 равна 0
      IHaveticketBuy2=0;//устанавливается значение. Фактуру на покупку 2 равна 0
      IHaveticketBuy3=0;//устанавливается значение. Фактуру на покупку 3 равна 0
      IHaveticketBuy4=0;//устанавливается значение. Фактуру на покупку 4 равна 0
      IHaveticketBuy5=0;//устанавливается значение. Фактуру на покупку 5 равна 0
      IHaveticketBuy6=0;//устанавливается значение. Фактуру на покупку 6 равна 0
      IHaveticketBuy7=0;//устанавливается значение. Фактуру на покупку 7 равна 0
      IHaveticketBuy8=0;//устанавливается значение. Фактуру на покупку 8 равна 0
      IHaveticketBuy9=0;//устанавливается значение. Фактуру на покупку 9 равна 0
      IHaveticketBuy10=0;//устанавливается значение. Фактуру на покупку 10 равна 0
      IHaveticketBuy11=0;//устанавливается значение. Фактуру на покупку 11 равна 0
      IHaveticketBuy12=0;//устанавливается значение. Фактуру на покупку 12 равна 0
      IHaveticketBuy13=0;//устанавливается значение. Фактуру на покупку 13 равна 0
      IHaveticketBuy14=0;//устанавливается значение. Фактуру на покупку 14 равна 0
      IHaveticketSell1=0;//устанавливается значение. Фактуру на продажу 1 равна 0
      IHaveticketSell2=0;//устанавливается значение. Фактуру на продажу 2 равна 0
      IHaveticketSell3=0;//устанавливается значение. Фактуру на продажу 3 равна 0
      IHaveticketSell4=0;//устанавливается значение. Фактуру на продажу 4 равна 0
      IHaveticketSell5=0;//устанавливается значение. Фактуру на продажу 5 равна 0
      IHaveticketSell6=0;//устанавливается значение. Фактуру на продажу 6 равна 0
      IHaveticketSell7=0;//устанавливается значение. Фактуру на продажу 7 равна 0
      IHaveticketSell8=0;//устанавливается значение. Фактуру на продажу 8 равна 0
      IHaveticketSell9=0;//устанавливается значение. Фактуру на продажу 9 равна 0
      IHaveticketSell10=0;//устанавливается значение. Фактуру на продажу 10 равна 0
      IHaveticketSell11=0;//устанавливается значение. Фактуру на продажу 11 равна 0
      IHaveticketSell12=0;//устанавливается значение. Фактуру на продажу 12 равна 0
      IHaveticketSell13=0;//устанавливается значение. Фактуру на продажу 13 равна 0
      IHaveticketSell14=0;//устанавливается значение. Фактуру на продажу 14 равна 0
     }
//--Работа с графиками---
   ChartSetInteger(0,CHART_SHOW_GRID,0,false);//Устанавливается параметр графика.Сетка удалена
   ChartSetInteger(0,CHART_DRAG_TRADE_LEVELS,0,false);//Устанавливается параметр графика.Перетаскивание торговых уровней запрещон
   ChartSetInteger(0,CHART_SHIFT,0,true);//Устанавливается параметр графика.Отступ в графике разрешон
   ChartSetDouble(0,CHART_SHIFT_SIZE,50);//Устанавливается параметр графика.Размер отступа на графике
//ChartSetSymbolPeriod(0,Symbol(),PERIOD_M1);
   ChartSetInteger(0,CHART_MODE,CHART_CANDLES);//Устанавливается параметр графика.Визуализация цены в виде японских свечей
   ChartSetInteger(0,CHART_COLOR_BACKGROUND,clrWhite);//Устанавливается параметр графика.Фоновый цвет Белый
   ChartSetInteger(0,CHART_COLOR_FOREGROUND,clrBlack);////Устанавливается параметр графика.Цвет осей шкалы цены черный
   ChartSetInteger(0,CHART_COLOR_CHART_UP,clrBlack);//Устанавливается параметр графика.Отступ в графике разрешон
   ChartSetInteger(0,CHART_COLOR_CHART_DOWN,clrBlack);//Устанавливается параметр графика.Тень и оконтовка бычей свечи черная
   ChartSetInteger(0,CHART_COLOR_CHART_LINE,clrBlack);//Устанавливается параметр графика.Тень и оконтовка медвежей свечи черная
   ChartSetInteger(0,CHART_COLOR_CANDLE_BULL,clrWhite);//Устанавливается параметр графика.Тело  бычей свечи белое
   ChartSetInteger(0,CHART_COLOR_CANDLE_BEAR,clrBlack);//Устанавливается параметр графика.Тело  медвежей свечи черное
   ChartSetInteger(0,CHART_COLOR_BID,clrGreen);//Устанавливается параметр графика.Цвет линии Бид зеленый


//-----------------------
   Obiekt714="714";
   ObjectDelete(Obiekt714);
   datetime BrTime=iTime(Symbol(),PERIOD_M1,1);//В переменную вкладывается значение времени последней закрытой свечи
   HIGHT=iHigh(Symbol(),PERIOD_M1,1);//В переменную вкладывается значение цены высоты последней закрытой свечи
//-----Funcion de auto deteccion de ancho de la ventana
   CHWPX=-1;//В переменную вкладывается число -1
   ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,CHWPX);//Переменная получает значение в пикселях шырены графика
//-------

//---Sell Tree---
   ObiektTicketSell1="130";//Переменой обьект фактура на продажу 1 присваивается число 130
   ObiektTicketBuy2="131";//Переменой обьект фактура на покупку 2 присваивается число 131
   ObiektTicketSell3="132";//Переменой фактура на продажу 3 присваивается число 132
   ObiektTicketBuy4="133";//Переменой обьект фактура на покупку 4 присваивается число 133
   ObiektTicketSell5="134";//Переменой фактура на продажу 5 присваивается число 134
   ObiektTicketBuy6="135";//Переменой обьект фактура на покупку 6 присваивается число 135
   ObiektTicketSell7="136";//Переменой фактура на продажу 7 присваивается число 136
//---BUY Tree---
   ObiektTicketBuy1="137";//Переменой обьект фактура на покупку 1 присваивается число 137
   ObiektTicketSell2="138";//Переменой обьект фактура на продажу 2 присваивается число 138
   ObiektTicketBuy3="139";//Переменой обьект фактура на покупку 3 присваивается число 139
   ObiektTicketSell4="140";//Переменой обьект фактура на продажу 4 присваивается число 140
   ObiektTicketBuy5="141";//Переменой обьект фактура на покупку 5 присваивается число 131
   ObiektTicketSell6="142";//Переменой обьект фактура на продажу 6 присваивается число 142
   ObiektTicketBuy7="143";//Переменой обьект фактура на покупку 7 присваивается число 143
//-------------   
   ShowTicketsBUYbutton="144";//Переменой обьект покажи фактуры на покупку кнопка присваивается число 144
   ShowTicketsSELLbutton="145";//Переменой обьект покажи фактуры на продажу кнопка присваивается число 145
   ShowTicketsbutton="146";//Переменой обьект покажи фактуры  кнопка присваивается число 146
   ObiektIndCompLineVert="2001";
   ObiektIndCompLineGor="2002";
   Start="125";
   Start1="147";
   Start2="168";
   sellbutton="1000001";
   buybutton="1000000";
   Obiekt500="500";
   Obiekt501="501";
   Obiekt502="502";
   Obiekt503="503";
   Obiekt504="504";
   Obiekt505="505";
   Obiekt506="506";
   Obiekt507="507";
   Obiekt508="508";
   Obiekt509="509";
   Obiekt510="510";
   Obiekt511="511";
   Obiekt512="512";
   Obiekt513="513";
   Obiekt514="514";
   Obiekt515="515";
   Obiekt516="516";
   Obiekt518="518";
   Obiekt518="519";
   Obiekt518="520";
   Obiekt518="521";
   Obiekt518="522";
   Obiekt518="523";
   Obiekt518="524";
   Obiekt518="525";
   Obiekt518="526";
   Obiekt518="527";
   Obiekt518="528";
   Obiekt518="529";
   Obiekt518="530";
   Obiekt518="531";
   Obiekt518="532";
   Obiekt518="533";
   pips="517";
   pipsprofit="523";
   textpipsprofit="524";
   finansbag="525";
   textfinansbag="526";
   Confidance="541";
   StopOrders="551";
   MarketOrders="552";
   LimitOrders="553";
   Obiekt560="560";
   Obiekt561="561";
   Obiekt562="562";
   sellbuttonLimit="563";
   buybuttonLimit="564";
   sellbuttonStop="565";
   buybuttonStop="566";
   kism="567";
   ObjectFWBuy1TP="568";
   ObjectFWBuy1SL="569";
   ObjectFWSell1TP="570";
   ObjectFWSell1SL="571";
   ObjectFWBuy2TP="572";
   ObjectFWBuy2SL="573";
   ObjectFWBuy3TP="574";
   ObjectFWBuy3SL="575";
   ObjectFWBuy4TP="576";
   ObjectFWBuy4SL="577";
   ObjectFWBuy5TP="578";
   ObjectFWBuy5SL="579";
   ObjectFWBuy6TP="580";
   ObjectFWBuy6SL="581";
   ObjectFWBuy7TP="582";
   ObjectFWBuy7SL="583";
   ObjectFWSell2TP="584";
   ObjectFWSell2SL="585";
   ObjectFWSell3TP="586";
   ObjectFWSell3SL="587";
   ObjectFWSell4TP="588";
   ObjectFWSell4SL="589";
   ObjectFWSell5TP="590";
   ObjectFWSell5SL="591";
   ObjectFWSell6TP="592";
   ObjectFWSell6SL="593";
   ObjectFWSell7TP="594";
   ObjectFWSell7SL="595";
   filefiveeuros="999";
   Obiekt700="700";
   Obiekt701="701";
   Obiekt702="702";
   RectanglLabel="703";
   Obiekt704="704";
   Obiekt705="705";
   Obiekt706="706";
   Obiekt707="707";
   Obiekt708="708";
   Obiekt709="709";
   Obiekt710="710";
   Obiekt711="711";
   Obiekt712="712";
   Obiekt713="713";
   Obiekt714="714";
   Obiekt715="715";
   Obiekt716="716";
   Obiekt717="717";
   Obiekt718="718";
   Obiekt719="719";
   Obiekt720="720";
   Obiekt721="721";
   Obiekt722="722";
   Obiekt723="723";
   Obiekt724="724";
   Obiekt725="725";
   Obiekt726="726";
   Obiekt727="727";
   Obiekt728="728";
   Obiekt729="729";
   Obiekt730="730";
   Obiekt731="731";
   Obiekt732="732";
   Obiekt733="733";
//------Разрешаюсоветнику торговать автоматически----
   bool thisAccountTradeAllowed=AccountInfoInteger(ACCOUNT_TRADE_ALLOWED);
   bool EATradeAllowed=AccountInfoInteger(ACCOUNT_TRADE_EXPERT);
//----------------------


//---Deliting Lines ------- 
ObjectsDeleteAll();
   
//---Lines calculation------
//--функция удаления обьектив из графика---

  // for(int io=10000; io>0; io--)//Доступ в тело цикла при обьявленных условиях.
    // {
      //string Num=IntegerToString(io);
      //string Obiekt="Obiekt";
      //string Fordelit=Obiekt+Num;
      //ObjectDelete(Fordelit);//Удаление обьектов с использавание имени обьекта и числа

     //}//Выход из тела цикла

//-----обиект прямоугольное окно
   ObjectCreate(0,RectanglLabel,OBJ_RECTANGLE_LABEL,0,0,0);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_YDISTANCE,0);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_XSIZE,CHWPX-300);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_YSIZE,200);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_BGCOLOR,clrPaleGreen);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_BORDER_TYPE,BORDER_SUNKEN);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_COLOR,clrBlack);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_STYLE,DRAW_SECTION);
   ObjectSetInteger(0,RectanglLabel,OBJPROP_WIDTH,10);

   LotsVolumen=0;//В переменную вкладывается 0 
//----------------
//------Поле ввода Времени----
   int obiektT=123;//Обьекту Т присваивается значение 123
   ObiektT=IntegerToString(obiektT);//Перевод числа в текс
   ObjectDelete(ObiektT);//Удаление обьекта Т
   ObjectCreate(ObiektT,OBJ_EDIT,0,BrTime,HIGHT+0.00015);//Создание Поля ввода для текста
   ObjectSetInteger(0,ObiektT,OBJPROP_XDISTANCE,CHWPX-300);//Устанавливается дистанция по оси X 300 пикселей
   ObjectSetInteger(0,ObiektT,OBJPROP_YDISTANCE,0);//Устанавливается дистанция по оси Y 0 пикселей
   ObjectSetInteger(0,ObiektT,OBJPROP_XSIZE,120);//Устанавливается размер поля по оси икс в 120 пикселей
   ObjectSetInteger(0,ObiektT,OBJPROP_YSIZE,20);//Устанавливается размер поля по оси игрик в 20 пикселей
   ObjectSetInteger(0,ObiektT,OBJPROP_ALIGN,ALIGN_CENTER);//Устанавливается значение центровка текста на уравень центра
   ObjectSetInteger(0,ObiektT,OBJPROP_COLOR,clrRed);//Обьект поле получает красный цвет
//--- установим текст
   string brts=TimeToString(iTime(Symbol(),0,1));//Установка текста в поле
   ObjectSetString(0,ObiektT,OBJPROP_TEXT,brts);

//------Поле ввода Уравня----
   int obiektLevelpole=124;
   ObiektLevelpole=IntegerToString(obiektLevelpole);
   ObjectDelete(ObiektLevelpole);
   ObjectCreate(ObiektLevelpole,OBJ_EDIT,0,BrTime,HIGHT+0.00015);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_YDISTANCE,25);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_XSIZE,50);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_YSIZE,20);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_ALIGN,ALIGN_CENTER);
   ObjectSetInteger(0,ObiektLevelpole,OBJPROP_COLOR,clrRed);
//--- установим текст
   string strlevelpole=IntegerToString(Level);
   ObjectSetString(0,ObiektLevelpole,OBJPROP_TEXT,strlevelpole);
//-------
//-------imag fibanachi-----
   string   filefibanachi="\\Images\\ImagesExpertBinWave\\fibanachi.bmp";
//-----------------------
   int obiekt501=501;
   Obiekt501=IntegerToString(obiekt501);
   ObjectDelete(Obiekt501);
   ObjectCreate(Obiekt501,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
   ObjectSetString(0,Obiekt501,OBJPROP_BMPFILE,filefibanachi);
   ObjectSetInteger(0,Obiekt501,OBJPROP_XDISTANCE,CHWPX-250);
   ObjectSetInteger(0,Obiekt501,OBJPROP_YDISTANCE,25);
//------Поле ввода Абьёмов----
   obiektVolumenpole=127;
   ObiektVolumenpole=IntegerToString(obiektVolumenpole);
   ObjectDelete(ObiektVolumenpole);
   ObjectCreate(ObiektVolumenpole,OBJ_EDIT,0,BrTime,HIGHT+0.00015);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_XDISTANCE,CHWPX-230);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_YDISTANCE,25);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_XSIZE,40);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_YSIZE,20);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_ALIGN,ALIGN_CENTER);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_COLOR,clrRed);
//------Индикаторная линия 1----
   ObjectDelete(ObiektIndCompLineVert);
   //ObjectCreate(ObiektIndCompLineVert,OBJ_EDIT,0,BrTime,HIGHT+0.00015);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_XDISTANCE,CHWPX-230);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_YDISTANCE,25);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_XSIZE,40);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_YSIZE,20);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_ALIGN,ALIGN_CENTER);
   ObjectSetInteger(0,ObiektVolumenpole,OBJPROP_COLOR,clrRed);
//--- установим текст
   string strVolumen=DoubleToString(LotsVolumen2,2);
   ObjectSetString(0,ObiektVolumenpole,OBJPROP_TEXT,strVolumen);
//-------
//-------imag volume-----
   string   filevolume="\\Images\\ImagesExpertBinWave\\volume.bmp";
//-----------------------
   int obiekt502=502;
   Obiekt502=IntegerToString(obiekt502);
   ObjectDelete(Obiekt502);
   ObjectCreate(Obiekt502,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
   ObjectSetString(0,Obiekt502,OBJPROP_BMPFILE,filevolume);
   ObjectSetInteger(0,Obiekt502,OBJPROP_XDISTANCE,CHWPX-190);
   ObjectSetInteger(0,Obiekt502,OBJPROP_YDISTANCE,25);
//--Start Button--------------------

   ObjectDelete(Start);
   ObjectCreate(0,Start,OBJ_BUTTON,0,bar_time,HIGHT+0.00015);
   ObjectSetInteger(0,Start,OBJPROP_XDISTANCE,CHWPX-150);
   ObjectSetInteger(0,Start,OBJPROP_YDISTANCE,0);
   ObjectSetInteger(0,Start,OBJPROP_XSIZE,50);
   ObjectSetInteger(0,Start,OBJPROP_YSIZE,20);
   string textStart="Start";
   ObjectSetString(0,Start,OBJPROP_TEXT,textStart);
   ObjectSetInteger(0,Start,OBJPROP_COLOR,clrRed);
   ObjectSetInteger(0,Start,OBJPROP_FONTSIZE,14);
   ObjectSetInteger(0,Start,OBJPROP_ALIGN,ALIGN_CENTER);
   Startstate=false;
   ObjectSetInteger(0,Start,OBJPROP_STATE,Startstate);
//long Startbuttonpresed=ObjectGetInteger(0,Start,OBJPROP_STATE,0);

//---Start Button--------------------
//--Set Pausa Button--------------------
   Pausa="pausabutton";
   ObjectDelete(Pausa);
   ObjectCreate(0,Pausa,OBJ_BUTTON,0,bar_time,HIGHT+0.00015);
   ObjectSetInteger(0,Pausa,OBJPROP_XDISTANCE,CHWPX-70);
   ObjectSetInteger(0,Pausa,OBJPROP_YDISTANCE,0);
   ObjectSetInteger(0,Pausa,OBJPROP_XSIZE,50);
   ObjectSetInteger(0,Pausa,OBJPROP_YSIZE,20);
   string textPausa="Pausa";
   ObjectSetString(0,Pausa,OBJPROP_TEXT,textPausa);
   ObjectSetInteger(0,Pausa,OBJPROP_COLOR,clrRed);
   ObjectSetInteger(0,Pausa,OBJPROP_FONTSIZE,13);
   ObjectSetInteger(0,Pausa,OBJPROP_ALIGN,ALIGN_CENTER);
   bool Pausastate=false;
   ObjectSetInteger(0,Start,OBJPROP_STATE,Pausastate);
//long Pausabuttonpresed=ObjectGetInteger(0,Pausa,OBJPROP_STATE,0);
//-------imag start-----
   string   filestart="\\Images\\ImagesExpertBinWave\\start.bmp";
//-----------------------
   int obiekt503=503;
   Obiekt503=IntegerToString(obiekt503);
   ObjectDelete(Obiekt503);
   ObjectCreate(Obiekt503,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
   ObjectSetString(0,Obiekt503,OBJPROP_BMPFILE,filestart);
   ObjectSetInteger(0,Obiekt503,OBJPROP_XDISTANCE,CHWPX-100);
   ObjectSetInteger(0,Obiekt503,OBJPROP_YDISTANCE,0);

//--ManualVolum Button--------------------

   ManualVolum="128";
   ObjectDelete(ManualVolum);
   ObjectCreate(0,ManualVolum,OBJ_BUTTON,0,bar_time,HIGHT+0.00015);
   ObjectSetInteger(0,ManualVolum,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,ManualVolum,OBJPROP_YDISTANCE,50);
   ObjectSetInteger(0,ManualVolum,OBJPROP_XSIZE,70);
   ObjectSetInteger(0,ManualVolum,OBJPROP_YSIZE,20);

   string textManualVolum="ADDVolum";
   ObjectSetString(0,ManualVolum,OBJPROP_TEXT,textManualVolum);
   ObjectSetInteger(0,ManualVolum,OBJPROP_COLOR,clrRed);
   ObjectSetInteger(0,ManualVolum,OBJPROP_FONTSIZE,9);
   ObjectSetInteger(0,ManualVolum,OBJPROP_ALIGN,ALIGN_CENTER);
   ManualVolumstate=false;
   ObjectSetInteger(0,ManualVolum,OBJPROP_STATE,ManualVolumstate);
   long ManualVolumbuttonpresed=ObjectGetInteger(0,ManualVolum,OBJPROP_STATE,0);
//-------imag start-----
   string   filemanualvolume="\\Images\\ImagesExpertBinWave\\manual.bmp";
//-----------------------
   int obiekt505=505;
   Obiekt505=IntegerToString(obiekt505);
   ObjectDelete(Obiekt505);
   ObjectCreate(Obiekt505,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
   ObjectSetString(0,Obiekt505,OBJPROP_BMPFILE,filemanualvolume);
   ObjectSetInteger(0,Obiekt505,OBJPROP_XDISTANCE,CHWPX-230);
   ObjectSetInteger(0,Obiekt505,OBJPROP_YDISTANCE,50);
//--Start Button--------------------
//------CHART NIMBER----

   int obiekt5001=5001;
   Obiekt5001=IntegerToString(obiekt5001);
   ObjectDelete(Obiekt5001);
   ObjectCreate(Obiekt5001,OBJ_LABEL,0,BrTime,HIGHT+0.00015);
   
  
//Comment(windowsnumber);
   ObjectSetString(0,Obiekt5001,OBJPROP_TEXT,"Signals in Mail:https://mail.google.com/ ");
   ObjectSetInteger(0,Obiekt5001,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,Obiekt5001,OBJPROP_YDISTANCE,75);
   ObjectSetInteger(0,Obiekt5001,OBJPROP_COLOR,clrRed);
   
   int obiekt5002=5002;
   Obiekt5002=IntegerToString(obiekt5002);
   ObjectDelete(Obiekt5002);
   ObjectCreate(Obiekt5002,OBJ_LABEL,0,BrTime,HIGHT+0.00015);
   
   
//Comment(windowsnumber);
   ObjectSetString(0,Obiekt5002,OBJPROP_TEXT,"Login:evgeniimqlroot@gmail.com");
   ObjectSetInteger(0,Obiekt5002,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,Obiekt5002,OBJPROP_YDISTANCE,90);
   ObjectSetInteger(0,Obiekt5002,OBJPROP_COLOR,clrRed);
   
    int obiekt5003=5003;
   Obiekt5003=IntegerToString(obiekt5003);
   ObjectDelete(Obiekt5003);
   ObjectCreate(Obiekt5003,OBJ_LABEL,0,BrTime,HIGHT+0.00015);
   
   
//Comment(windowsnumber);
   ObjectSetString(0,Obiekt5003,OBJPROP_TEXT,"Password:MqlRoot2020 ");
   ObjectSetInteger(0,Obiekt5003,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,Obiekt5003,OBJPROP_YDISTANCE,105);
   ObjectSetInteger(0,Obiekt5003,OBJPROP_COLOR,clrRed);
//-----------------------
   
   int obiekt5004=5004;
   string Obiekt5004=IntegerToString(obiekt5004);
   ObjectDelete(Obiekt5004);
   ObjectCreate(Obiekt5004,OBJ_LABEL,0,BrTime,HIGHT+0.00015);
   
   
//Comment(windowsnumber);
   ObjectSetString(0,Obiekt5004,OBJPROP_TEXT,"DONATE PLEASE http://paypal.me/mql4Root");
   ObjectSetInteger(0,Obiekt5004,OBJPROP_XDISTANCE,CHWPX-300);
   ObjectSetInteger(0,Obiekt5004,OBJPROP_YDISTANCE,180);
   ObjectSetInteger(0,Obiekt5004,OBJPROP_COLOR,clrRed);
//--Start Button--------------------


//--Реверс--------------------

   Revers="148";
   ObjectDelete(Revers);
   ObjectCreate(0,Revers,OBJ_LABEL,0,bar_time,HIGHT+0.00015);
   ObjectSetInteger(0,Revers,OBJPROP_XDISTANCE,CHWPX-120);
   ObjectSetInteger(0,Revers,OBJPROP_YDISTANCE,50);
//ObjectSetInteger(0,Accountprofit,OBJPROP_XSIZE,80);
//ObjectSetInteger(0,Accountprofit,OBJPROP_YSIZE,20);

   string textrevers="0";
   ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
   ObjectSetInteger(0,Revers,OBJPROP_COLOR,clrRed);
   ObjectSetInteger(0,Revers,OBJPROP_FONTSIZE,11);
   ObjectSetInteger(0,Revers,OBJPROP_ALIGN,ALIGN_CENTER);



//--finansbag--------------------

   
//-------------------
   reset="533";
   ObjectDelete(reset);
   ObjectCreate(0,reset,OBJ_BUTTON,0,bar_time,HIGHT+0.00015);
   ObjectSetInteger(0,reset,OBJPROP_XDISTANCE,CHWPX-50);
   ObjectSetInteger(0,reset,OBJPROP_YDISTANCE,50);
   ObjectSetInteger(0,reset,OBJPROP_XSIZE,50);
   ObjectSetInteger(0,reset,OBJPROP_YSIZE,20);

   string textreset="Reset";
   ObjectSetString(0,reset,OBJPROP_TEXT,textreset);
   ObjectSetInteger(0,reset,OBJPROP_COLOR,clrRed);
   ObjectSetInteger(0,reset,OBJPROP_FONTSIZE,10);
   ObjectSetInteger(0,reset,OBJPROP_ALIGN,ALIGN_CENTER);
   resetstate=false;
   ObjectSetInteger(0,reset,OBJPROP_STATE,resetstate);
//long resetbuttonpresed=ObjectGetInteger(0,reset,OBJPROP_STATE,0);

//--------------------
 

//--------------------------


   if(fotos==true)//сделать фото графика равно ложь
     {
      //----------
      ObjectCreate(Obiekt730,OBJ_EDIT,0,BrTime,HIGHT+0.00015);//Создание поля для ввода текста.
      ObjectSetString(0,Obiekt730,OBJPROP_TEXT,".PNG");//Устанавливается расширение пнг
      ObjectSetInteger(0,Obiekt730,OBJPROP_XDISTANCE,CHWPX-50);//Дистанция по икс 50 пикселей
      ObjectSetInteger(0,Obiekt730,OBJPROP_YDISTANCE,85);//Дистанция по игрик 85 пикселей
      ObjectSetInteger(0,Obiekt730,OBJPROP_XSIZE,50);//Размер по икс 50 пикселей 
      ObjectSetInteger(0,Obiekt730,OBJPROP_YSIZE,20);//Размер по игрик 20 пикселей
      ObjectSetInteger(0,Obiekt730,OBJPROP_ALIGN,ALIGN_CENTER);//Центрование текста по середине
      ObjectSetInteger(0,Obiekt730,OBJPROP_COLOR,clrRed);//Цвет поля красный

      ObjectCreate(0,Obiekt731,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);//Создание кнопки
      ObjectSetString(0,Obiekt731,OBJPROP_TEXT,"SMILE");//Название кнопи смаил
      ObjectSetInteger(0,Obiekt731,OBJPROP_XDISTANCE,CHWPX-100);//Дистанция по икс 100 пикселей
      ObjectSetInteger(0,Obiekt731,OBJPROP_YDISTANCE,85);//Дистанция по игрик 85 пикселей
      ObjectSetInteger(0,Obiekt731,OBJPROP_XSIZE,50);//Размер по икс 50 пикселей
      ObjectSetInteger(0,Obiekt731,OBJPROP_YSIZE,20);//Размер по игрик 20 пикселей
      ObjectSetInteger(0,Obiekt731,OBJPROP_COLOR,clrRed);//Цвет кнопки красный
      ObjectSetInteger(0,Obiekt731,OBJPROP_FONTSIZE,10);//Шрифт текста 10 пикселей
      ObjectSetInteger(0,Obiekt731,OBJPROP_ALIGN,ALIGN_CENTER);//Центрование текстапо середине
     }
//------------------------------------
  
   if(TicketsManual==true)//Если фактуры ручьные равны правда то доступ в тело фунции разрешон
     {
      IHaveticketBuy1=ManualIHaveticketBuy1;//я имею фактуру на покупку 1 присваивается номер.
      IHaveticketSell2=ManualIHaveticketSell2;//я имею фактуру на продажу 2 присваивается номер.
      IHaveticketBuy3=ManualIHaveticketBuy3;//я имею фактуру на покупку 3 присваивается номер.
      IHaveticketSell4=ManualIHaveticketSell4;//я имею фактуру на продажу 4 присваивается номер.
      IHaveticketBuy5=ManualIHaveticketBuy5;//я имею фактуру на покупку 5 присваивается номер.
      IHaveticketSell6=ManualIHaveticketSell6;//я имею фактуру на продажу 6 присваивается номер.
      IHaveticketBuy7=ManualIHaveticketBuy7;//я имею фактуру на покупку 7 присваивается номер.


      IHaveticketSell1=ManualIHaveticketSell1;//я имею фактуру на продажу 1 присваивается номер.
      IHaveticketBuy2=ManualIHaveticketBuy2;//я имею фактуру на покупку 2 присваивается номер.
      IHaveticketSell3=ManualIHaveticketSell3;//я имею фактуру на продажу 3 присваивается номер.
      IHaveticketBuy4=ManualIHaveticketBuy4;//я имею фактуру на покупку 4 присваивается номер.
      IHaveticketSell5=ManualIHaveticketSell5;//я имею фактуру на продажу 5 присваивается номер.
      IHaveticketBuy6=ManualIHaveticketBuy6;//я имею фактуру на покупку 6 присваивается номер.
      IHaveticketSell7=ManualIHaveticketSell7;//я имею фактуру на продажу 7 присваивается номер.
      Print(" Manual Ticket",IHaveticketBuy1,IHaveticketSell1);//Печатается сообщение.Ручьные фактуры, номера.
      Alert(" Manual Ticket",IHaveticketBuy1,IHaveticketSell1);//Выводится Оповещение.Ручьные фактуры, номера.
     }


  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
void OnTick()//в Тике вход в тело функции разрешон
  {//Начало тела функции в Тике

//---Смена уровня профита
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)//Если я имею фактуру на покупку 1 или 3 или 5 или 7 больше 0 то доступ в тело функции разрешон
     {//Начало тела функции
      long TP5presed=ObjectGetInteger(0,TP5,OBJPROP_STATE,0);//В переменную ТП5нажато присваивается 0
      if(TP5presed==1)//Если тп5нажато равно 1 то доступ в тело функции разрешон
        {//Начало тела функции
         LongTackeProfit=IpaintFiboLineUP_5;//Переменной длинныйвозмиприбыль Присваивается цена я рисую фиболинию верх5
         Alert(" Take Profit for LONG is ",IpaintFiboLineUP_5);//Визуальное сообщение 
         Print(" Take Profit for LONG is ",IpaintFiboLineUP_5);//Печать сообщения
         ObjectSetInteger(0,TP5,OBJPROP_STATE,0);//Устанавливается значеное 0 в переменную тп5
        }//Выход из тела функции
      long TP8presed=ObjectGetInteger(0,TP8,OBJPROP_STATE,0);
      if(TP8presed==1)
        {
         LongTackeProfit=IpaintFiboLineUP_8;
         Alert(" Take Profit for LONG is ",IpaintFiboLineUP_8);
         Print(" Take Profit for LONG is ",IpaintFiboLineUP_8);
         ObjectSetInteger(0,TP8,OBJPROP_STATE,0);
        }
      long TP13presed=ObjectGetInteger(0,TP13,OBJPROP_STATE,0);
      if(TP13presed==1)
        {
         LongTackeProfit=IpaintFiboLineUP_13;
         Alert(" Take Profit for LONG is ",IpaintFiboLineUP_13);
         Print(" Take Profit for LONG is ",IpaintFiboLineUP_13);
         ObjectSetInteger(0,TP13,OBJPROP_STATE,0);
        }
      long TP21presed=ObjectGetInteger(0,TP21,OBJPROP_STATE,0);
      if(TP21presed==1)
        {
         LongTackeProfit=IpaintFiboLineUP_21;
         Alert(" Take Profit for LONG is ",IpaintFiboLineUP_21);
         Print(" Take Profit for LONG is ",IpaintFiboLineUP_21);
         ObjectSetInteger(0,TP21,OBJPROP_STATE,0);
        }
     }

   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long TP5presed=ObjectGetInteger(0,TP5,OBJPROP_STATE,0);
      if(TP5presed==1)
        {
         ShortTackeProfit=IpaintFiboLineDOWN_5;
         Alert(" Take Profit for SHORT is ",IpaintFiboLineDOWN_5);
         Print(" Take Profit for SHORT is ",IpaintFiboLineDOWN_5);
         ObjectSetInteger(0,TP5,OBJPROP_STATE,0);
        }
      long TP8presed=ObjectGetInteger(0,TP8,OBJPROP_STATE,0);
      if(TP8presed==1)
        {
         ShortTackeProfit=IpaintFiboLineDOWN_8;
         Alert(" Take Profit for SHORT is ",IpaintFiboLineDOWN_8);
         Print(" Take Profit for SHORT is ",IpaintFiboLineDOWN_8);
         ObjectSetInteger(0,TP8,OBJPROP_STATE,0);
        }
      long TP13presed=ObjectGetInteger(0,TP13,OBJPROP_STATE,0);
      if(TP13presed==1)
        {
         ShortTackeProfit=IpaintFiboLineDOWN_13;
         Alert(" Take Profit for SHORT is ",IpaintFiboLineDOWN_13);
         Print(" Take Profit for SHORT is ",IpaintFiboLineDOWN_13);
         ObjectSetInteger(0,TP13,OBJPROP_STATE,0);
        }
      long TP21presed=ObjectGetInteger(0,TP21,OBJPROP_STATE,0);
      if(TP21presed==1)
        {
         ShortTackeProfit=IpaintFiboLineDOWN_21;
         Alert(" Take Profit for SHORT is ",IpaintFiboLineDOWN_21);
         Print(" Take Profit for SHORT is ",IpaintFiboLineDOWN_21);
         ObjectSetInteger(0,TP21,OBJPROP_STATE,0);
        }
     }

//-----Модуль для переноса стоп позиции
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL0presed=ObjectGetInteger(0,SL0,OBJPROP_STATE,0);
      if(SL0presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,BuyStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",BuyStop);
            Print(" STOP LOSS for LONG is ",BuyStop);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,BuyStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",BuyStop);
            Print(" STOP LOSS for LONG is ",BuyStop);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,BuyStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",BuyStop);
            Print(" STOP LOSS for LONG is ",BuyStop);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,BuyStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",BuyStop);
            Print(" STOP LOSS for LONG is ",BuyStop);
           }
         ObjectSetInteger(0,SL0,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL0presed=ObjectGetInteger(0,SL0,OBJPROP_STATE,0);
      if(SL0presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,SellStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",SellStop);
            Print(" STOP LOSS for LONG is ",SellStop);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,SellStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",SellStop);
            Print(" STOP LOSS for LONG is ",SellStop);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,SellStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",SellStop);
            Print(" STOP LOSS for LONG is ",SellStop);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,SellStop,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",SellStop);
            Print(" STOP LOSS for LONG is ",SellStop);
           }
         ObjectSetInteger(0,SL0,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL_2presed=ObjectGetInteger(0,SL_2,OBJPROP_STATE,0);
      if(SL_2presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         ObjectSetInteger(0,SL_2,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL_2presed=ObjectGetInteger(0,SL_2,OBJPROP_STATE,0);
      if(SL_2presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         ObjectSetInteger(0,SL_2,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL_1presed=ObjectGetInteger(0,SL_1,OBJPROP_STATE,0);
      if(SL_1presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         ObjectSetInteger(0,SL_1,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL_1presed=ObjectGetInteger(0,SL_1,OBJPROP_STATE,0);
      if(SL_1presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         ObjectSetInteger(0,SL_1,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL1presed=ObjectGetInteger(0,SL1,OBJPROP_STATE,0);
      if(SL1presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,LEVELUP,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELUP);
            Print(" STOP LOSS for LONG is ",LEVELUP);
           }
         ObjectSetInteger(0,SL1,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL1presed=ObjectGetInteger(0,SL1,OBJPROP_STATE,0);
      if(SL1presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,LEVELDOWN,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",LEVELDOWN);
            Print(" STOP LOSS for LONG is ",LEVELDOWN);
           }
         ObjectSetInteger(0,SL1,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL2presed=ObjectGetInteger(0,SL2,OBJPROP_STATE,0);
      if(SL2presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,IpaintFiboLineUP_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_2);
           }
         ObjectSetInteger(0,SL2,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL2presed=ObjectGetInteger(0,SL2,OBJPROP_STATE,0);
      if(SL2presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineDOWN_2,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_2);
           }
         ObjectSetInteger(0,SL2,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL3presed=ObjectGetInteger(0,SL3,OBJPROP_STATE,0);
      if(SL3presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,IpaintFiboLineUP_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,IpaintFiboLineUP_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,IpaintFiboLineUP_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,IpaintFiboLineUP_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_3);
           }
         ObjectSetInteger(0,SL3,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL3presed=ObjectGetInteger(0,SL3,OBJPROP_STATE,0);
      if(SL3presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineDOWN_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineDOWN_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineDOWN_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineDOWN_3,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_3);
           }
         ObjectSetInteger(0,SL3,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL5presed=ObjectGetInteger(0,SL5,OBJPROP_STATE,0);
      if(SL5presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,IpaintFiboLineUP_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,IpaintFiboLineUP_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,IpaintFiboLineUP_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,IpaintFiboLineUP_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_5);
           }
         ObjectSetInteger(0,SL5,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL5presed=ObjectGetInteger(0,SL5,OBJPROP_STATE,0);
      if(SL5presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineDOWN_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineDOWN_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineDOWN_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineDOWN_5,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_5);
           }
         ObjectSetInteger(0,SL5,OBJPROP_STATE,0);
        }
     }



   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL8presed=ObjectGetInteger(0,SL8,OBJPROP_STATE,0);
      if(SL8presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineDOWN_8,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineDOWN_8,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineDOWN_8,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineDOWN_8,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_8);
           }
         ObjectSetInteger(0,SL8,OBJPROP_STATE,0);
        }
     }
   if(IHaveticketBuy1>0||IHaveticketBuy3>0||IHaveticketBuy5>0||IHaveticketBuy7>0)
     {
      long SL13presed=ObjectGetInteger(0,SL13,OBJPROP_STATE,0);
      if(SL13presed==1)
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy1,0,IpaintFiboLineUP_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
           }
         if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy3,0,IpaintFiboLineUP_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
           }
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy5,0,IpaintFiboLineUP_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
           }
         if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketBuy7,0,IpaintFiboLineUP_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineUP_13);
           }
         ObjectSetInteger(0,SL13,OBJPROP_STATE,0);
        }
     }


   if(IHaveticketSell1>0||IHaveticketSell3>0||IHaveticketSell5>0||IHaveticketSell7>0)
     {
      long SL13presed=ObjectGetInteger(0,SL13,OBJPROP_STATE,0);
      if(SL13presed==1)
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell1,0,IpaintFiboLineDOWN_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
           }
         if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell3,0,IpaintFiboLineDOWN_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
           }
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell5,0,IpaintFiboLineDOWN_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
           }
         if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {

            bool ch=OrderModify(IHaveticketSell7,0,IpaintFiboLineDOWN_13,0,0,clrDarkMagenta);
            Alert(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
            Print(" STOP LOSS for LONG is ",IpaintFiboLineDOWN_13);
           }
         ObjectSetInteger(0,SL13,OBJPROP_STATE,0);
        }
     }
//------------Модуль показывающий в процентах прибыль----------------
   if(IHaveticketBuy1>0)
     {

      if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {
         double OdnaSotaya=AccountBalance()/10000;
         //IpaintFiboLineUP_5
        }
     }
//-------------------------------------------------------------------
//---модуль для закрытия лонга при достижении уравня при скрытии уравныа профита Bid для Покупки Ask Для продажи
   if((IHaveticketBuy1>0 || IHaveticketBuy3>0 || IHaveticketBuy5>0 ||IHaveticketBuy7>0) && Bid>=LongTackeProfit)
     {
      if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketBuy1,OrderLots(),Bid,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketBuy3,OrderLots(),Bid,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketBuy5,OrderLots(),Bid,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketBuy7,OrderLots(),Bid,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
     }
   if((IHaveticketSell1>0 || IHaveticketSell3>0 ||IHaveticketSell5>0 ||IHaveticketSell7>0)  && Ask<=ShortTackeProfit)
     {
      if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketSell1,OrderLots(),Ask,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketSell3,OrderLots(),Ask,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketSell5,OrderLots(),Ask,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
      if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         OrdChek=OrderClose(IHaveticketSell7,OrderLots(),Ask,0,clrBisque);//Закрытие ордера на покупку при первом бай

        }
     }



   if(fotos==true)
     {
      //----foto
      long IPressedcheezbutton=ObjectGetInteger(0,Obiekt731,OBJPROP_STATE,0);
      if(IPressedcheezbutton==1)
        {
         string text730=ObjectGetString(0,Obiekt730,OBJPROP_TEXT);
         ChartScreenShot(0,text730,1124,640,ALIGN_CENTER);
         ObjectSetInteger(0,Obiekt731,OBJPROP_STATE,0);
         ObjectSetString(0,Obiekt730,OBJPROP_TEXT,".PNG");
        }
     }


   if(TRAILSTOP==true)
     {
      //--ТреилСтоп - Фиксация прибыли на 100%--

     }

//--------------кнопка перезагрузки советника
   long IPressedresetbutton=ObjectGetInteger(0,reset,OBJPROP_STATE,0);
   if(IPressedresetbutton==1)
     {
      OnInit();

     }
//-------------------------------------------


///-----------------------
   long IPressedManualVolumbutton=ObjectGetInteger(0,ManualVolum,OBJPROP_STATE,0);
   if(IPressedManualVolumbutton==1)
     {
      string Volumget=ObjectGetString(0,ObiektVolumenpole,OBJPROP_TEXT);
      double Volumresult=StringToDouble(Volumget);

      LotsVolumen=Volumresult;
      ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,Volumget);
      ObjectDelete(ManualVolum);
      //ObjectDelete(AutoVolum);
      ObjectDelete(Obiekt504);
      ObjectDelete(Obiekt505);
      string strVolumen=DoubleToString(LotsVolumen,2);
      ObjectSetString(0,ObiektVolumenpole,OBJPROP_TEXT,strVolumen);






     }
   long IPressedAutoVolumbutton=ObjectGetInteger(0,AutoVolum,OBJPROP_STATE,0);
   if(IPressedAutoVolumbutton==1)

     {

      datetime BrTime=iTime(Symbol(),PERIOD_M1,1);

      if(LEVELDOWN>0)
        {

         if(threeout==false)
           {
            string textpipsget=ObjectGetString(0,pips,OBJPROP_TEXT);
            double pipseresult=StringToDouble(textpipsget);
            //double pipsinmarket=pipseresult*0.00001;
            stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
            DeposittoTrade=((AccountBalance()-pipseresult)/100)*deopsitpercent;
            ICalculateStopfortrade1=stoppoints*1;
            ICalculateStopfortrade2=stoppoints*1;
            ICalculateStopfortrade3=stoppoints*1;
            ICalculateStopfortrade4=stoppoints*3;
            ICalculateStopfortrade5=stoppoints*2;
            ICalculateStopfortrade6=stoppoints*8;

            resultado1=ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6;
            double LoTstoTrade_1=NormalizeDouble((DeposittoTrade/resultado1),2);
            double LoTstoTrade_2=NormalizeDouble(LoTstoTrade_1*8,2);//Максимальное колличество удерживаемой моржи
            double Margen_1=NormalizeDouble(((LoTstoTrade_2*100000)*Bid)/shoulder,2);//Расчёт маржы по максимальному входу в рынок по лотам
            LoTstoTrade=NormalizeDouble(((DeposittoTrade-Margen_1)/resultado1),2);//Колво лотов с учётом маржи
            Print("resultado1 ",resultado1," LoTstoTrade_1 ",LoTstoTrade_1," LoTstoTrade_2 ",LoTstoTrade_2," Margen_1 ",Margen_1," LoTstoTrade ",LoTstoTrade);
            Alert(LoTstoTrade);
           }
         if(threeout==true)
           {
            string textpipsget=ObjectGetString(0,pips,OBJPROP_TEXT);
            double pipseresult=StringToDouble(textpipsget);
            //double pipsinmarket=pipseresult*0.00001;
            stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
            DeposittoTrade=((AccountBalance()-pipseresult)/100)*deopsitpercent;
            ICalculateStopfortrade1=stoppoints*1;
            ICalculateStopfortrade2=stoppoints*1;
            ICalculateStopfortrade3=stoppoints*1;
            ICalculateStopfortrade4=stoppoints*1;
            resultado1=ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4;
            LoTstoTrade=NormalizeDouble((DeposittoTrade/resultado1),2);
            Print(LoTstoTrade);
            Alert(LoTstoTrade);
           }

         //  LotsVolumen=LoTstoTrade;
        }
      else
         Alert("ADD Levels for Calculate Volumens");
      ObjectSetInteger(0,AutoVolum,OBJPROP_STATE,false);

      //ObjectDelete(AutoVolum);
      //ObjectDelete(ManualVolum);
      //ObjectDelete(Obiekt504);
      //ObjectDelete(Obiekt505);
      string strVolumen=DoubleToString(LotsVolumen,2);
      ObjectSetString(0,ObiektVolumenpole,OBJPROP_TEXT,strVolumen);

      //--Start Button--------------------

      //--Start Button--------------------


     }
//--------Pause Button-----//
   long Pausabuttonpresed=ObjectGetInteger(0,Pausa,OBJPROP_STATE,0);
   if(Pausabuttonpresed==1)
     {


      string IgetText=ObjectGetString(0,ObiektT,OBJPROP_TEXT);
      bartimeresult=StringToTime(IgetText);
      if(bartimeresult==iTime(Symbol(),PERIOD_M1,1))
        {
         BreakPoint();
         ObjectSetInteger(0,Pausa,OBJPROP_STATE,0);
        }
     }

//------- Кнопка СТАРТ ------
   long IpressedStartbutton=ObjectGetInteger(0,Start,OBJPROP_STATE,0);
   if(IpressedStartbutton==1)
     {
      //--se eleminan los botones de tikets
      ObjectDelete(ShowTicketsbutton);
      ObjectDelete(Obiekt506);
      ObjectDelete(Obiekt5001);
      ObjectDelete(Obiekt5002);
      ObjectDelete(Obiekt5003);
      //-------imag green-----
      ObjectDelete(Obiekt528);
      ObjectDelete(Obiekt529);
      datetime IreceiveBarTime=iTime(Symbol(),PERIOD_M1,1);
      //string   filegreen="\\Images\\ImagesExpertBinWave\\green.bmp";
      //-----------------------
      //int obiekt530=530;
      //Obiekt530=IntegerToString(obiekt530);
      //ObjectDelete(Obiekt530);
      //ObjectCreate(Obiekt530,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
      //ObjectSetString(0,Obiekt530,OBJPROP_BMPFILE,filegreen);
      //ObjectSetInteger(0,Obiekt530,OBJPROP_XDISTANCE,630);
      //ObjectSetInteger(0,Obiekt530,OBJPROP_YDISTANCE,25);
      //--Start Button--------------------
      //-------------cogo los datos del grafico--------
      string IgetText=ObjectGetString(0,ObiektT,OBJPROP_TEXT);
      bartimeresult=StringToTime(IgetText);
      //------------cogo los datos del grafico----------
      string IgetLevel=ObjectGetString(0,ObiektLevelpole,OBJPROP_TEXT);
      IreceiveLevelresult=StrToInteger(IgetLevel);
      Coment=IgetText+" "+IgetLevel;//Коментарий в тикете "Сигнал"
      string   filefibanachi="\\Images\\ImagesExpertBinWave\\fibanachiretrato.bmp";
      ObjectSetString(0,Obiekt501,OBJPROP_BMPFILE,filefibanachi);

      int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
      if(file_handle3>0)
        {
         FileSeek(file_handle3,0,SEEK_END);
         FileWrite(file_handle3,ChartExpertName," ",AccountCompany()," ",AccountNumber()," ",IgetText,"  ",IgetLevel);
         FileClose(file_handle3);
        }
      //----------------------------------------------------------



      RefreshRates();
      SHIFT=iBarShift(Symbol(),PERIOD_M1,bartimeresult);//Candle Time
      HIGHT=iHigh(Symbol(),PERIOD_M1,SHIFT);
      LOW=iLow(Symbol(),PERIOD_M1,SHIFT);
      CLOSE=iClose(Symbol(),PERIOD_M1,SHIFT);
      OPEN=iOpen(Symbol(),PERIOD_M1,SHIFT);
      normalLevel=IreceiveLevelresult*Point;
      center=NormalizeDouble(HIGHT-((HIGHT-LOW)/2),NormalizaDigi);
      LEVELUP=NormalizeDouble((center+normalLevel),NormalizaDigi);//0
      LEVELDOWN=NormalizeDouble((center-normalLevel),NormalizaDigi);//0
      FIBAUP100=NormalizeDouble((LEVELDOWN+(((LEVELUP-LEVELDOWN)/IreceiveLevelresult)*100)),NormalizaDigi);//--ТП1
      FIBADOWN100=NormalizeDouble((LEVELUP-(((LEVELUP-LEVELDOWN)/IreceiveLevelresult)*100)),NormalizaDigi);//--ТП1
      //---------------
     //--Число ПИ - Расчёт уровней на база числа ПИ
     if(PI_LINES==true)
     {
     
     string PI_u1="PI_u1";
     string PI_u2="PI_u2";
     string PI_u3="PI_u3";
     string PI_u4="PI_u4";
     string PI_u5="PI_u5";
     string PI_u6="PI_u6";
     string PI_u7="PI_u7";
     string PI_u8="PI_u8";
     string PI_u9="PI_u9";
     string PI_u10="PI_u10";
     string PI_u11="PI_u11";
     string PI_u12="PI_u12";
     string PI_u13="PI_u13";
     string PI_u14="PI_u14";
     string PI_u15="PI_u15";
     string PI_u16="PI_u16";
     string PI_d1="PI_d1";
     string PI_d2="PI_d2";
     string PI_d3="PI_d3";
     string PI_d4="PI_d4";
     string PI_d5="PI_d5";
     string PI_d6="PI_d6";
     string PI_d7="PI_d7";
     string PI_d8="PI_d8";
     string PI_d9="PI_d9";
     string PI_d10="PI_d10";
     string PI_d11="PI_d11";
     string PI_d12="PI_d12";
     string PI_d13="PI_d13";
     string PI_d14="PI_d14";
     string PI_d15="PI_d15";
     string PI_d16="PI_d16";
     
     for(int i=1;i<=16;i++)
     {     
     string Iind=IntegerToString(i);
     string numD="PI_d"+Iind;
     string numU="PI_u"+Iind;
     ObjectDelete(numD);
     ObjectDelete(numU);
     }
     
     
     double PI=NormalizeDouble((normalLevel*3)+((normalLevel/100)*14),NormalizaDigi);
     double PI_1_2=NormalizeDouble(((normalLevel*3)+((normalLevel/100)*14))/2,NormalizaDigi);//Половина числа ПИ 1,57
     
     double PI_U1=NormalizeDouble(center+PI,NormalizaDigi);
     double PI_U2=NormalizeDouble(PI_U1+PI,NormalizaDigi);
     double PI_U3=NormalizeDouble(PI_U2+PI,NormalizaDigi);
     double PI_U4=NormalizeDouble(PI_U3+PI,NormalizaDigi);
     double PI_U5=NormalizeDouble(PI_U4+PI,NormalizaDigi);
     double PI_U6=NormalizeDouble(PI_U5+PI,NormalizaDigi);
     double PI_U7=NormalizeDouble(PI_U6+PI,NormalizaDigi);
     double PI_U8=NormalizeDouble(PI_U7+PI,NormalizaDigi);
     double PI_U9=NormalizeDouble(PI_U8+PI,NormalizaDigi);
     double PI_U10=NormalizeDouble(PI_U9+PI,NormalizaDigi);
     double PI_U11=NormalizeDouble(PI_U10+PI,NormalizaDigi);
     double PI_U12=NormalizeDouble(PI_U11+PI,NormalizaDigi);
     double PI_U13=NormalizeDouble(PI_U12+PI,NormalizaDigi);
     double PI_U14=NormalizeDouble(PI_U13+PI,NormalizaDigi);
     double PI_U15=NormalizeDouble(PI_U14+PI,NormalizaDigi);
     double PI_U16=NormalizeDouble(PI_U15+PI,NormalizaDigi);
     
     double PI_D1=NormalizeDouble(center-PI,NormalizaDigi);
     double PI_D2=NormalizeDouble(PI_D1-PI,NormalizaDigi);
     double PI_D3=NormalizeDouble(PI_D2-PI,NormalizaDigi);
     double PI_D4=NormalizeDouble(PI_D3-PI,NormalizaDigi);
     double PI_D5=NormalizeDouble(PI_D4-PI,NormalizaDigi);
     double PI_D6=NormalizeDouble(PI_D5-PI,NormalizaDigi);
     double PI_D7=NormalizeDouble(PI_D6-PI,NormalizaDigi);
     double PI_D8=NormalizeDouble(PI_D7-PI,NormalizaDigi);
     double PI_D9=NormalizeDouble(PI_D8-PI,NormalizaDigi);
     double PI_D10=NormalizeDouble(PI_D9-PI,NormalizaDigi);
     double PI_D11=NormalizeDouble(PI_D10-PI,NormalizaDigi);
     double PI_D12=NormalizeDouble(PI_D11-PI,NormalizaDigi);
     double PI_D13=NormalizeDouble(PI_D12-PI,NormalizaDigi);
     double PI_D14=NormalizeDouble(PI_D13-PI,NormalizaDigi);
     double PI_D15=NormalizeDouble(PI_D14-PI,NormalizaDigi);
     double PI_D16=NormalizeDouble(PI_D15-PI,NormalizaDigi);
     
     ObjectCreate(PI_u1,OBJ_HLINE,0,TimeCurrent(),PI_U1);
     ObjectCreate(PI_u2,OBJ_HLINE,0,TimeCurrent(),PI_U2);
     ObjectCreate(PI_u3,OBJ_HLINE,0,TimeCurrent(),PI_U3);
     ObjectCreate(PI_u4,OBJ_HLINE,0,TimeCurrent(),PI_U4);
     ObjectCreate(PI_u5,OBJ_HLINE,0,TimeCurrent(),PI_U5);
     ObjectCreate(PI_u6,OBJ_HLINE,0,TimeCurrent(),PI_U6);
     ObjectCreate(PI_u7,OBJ_HLINE,0,TimeCurrent(),PI_U7);
     ObjectCreate(PI_u8,OBJ_HLINE,0,TimeCurrent(),PI_U8);
     ObjectCreate(PI_u9,OBJ_HLINE,0,TimeCurrent(),PI_U9);
     ObjectCreate(PI_u10,OBJ_HLINE,0,TimeCurrent(),PI_U10);
     ObjectCreate(PI_u11,OBJ_HLINE,0,TimeCurrent(),PI_U11);
     ObjectCreate(PI_u12,OBJ_HLINE,0,TimeCurrent(),PI_U12);
     ObjectCreate(PI_u13,OBJ_HLINE,0,TimeCurrent(),PI_U13);
     ObjectCreate(PI_u14,OBJ_HLINE,0,TimeCurrent(),PI_U14);
     ObjectCreate(PI_u15,OBJ_HLINE,0,TimeCurrent(),PI_U15);
     ObjectCreate(PI_u16,OBJ_HLINE,0,TimeCurrent(),PI_U16);
     Print(PI_U16," ",PI_D1);
     
     ObjectCreate(PI_d1,OBJ_HLINE,0,TimeCurrent(),PI_D1);
     ObjectCreate(PI_d2,OBJ_HLINE,0,TimeCurrent(),PI_D2);
     ObjectCreate(PI_d3,OBJ_HLINE,0,TimeCurrent(),PI_D3);
     ObjectCreate(PI_d4,OBJ_HLINE,0,TimeCurrent(),PI_D4);
     ObjectCreate(PI_d5,OBJ_HLINE,0,TimeCurrent(),PI_D5);
     ObjectCreate(PI_d6,OBJ_HLINE,0,TimeCurrent(),PI_D6);
     ObjectCreate(PI_d7,OBJ_HLINE,0,TimeCurrent(),PI_D7);
     ObjectCreate(PI_d8,OBJ_HLINE,0,TimeCurrent(),PI_D8);
     ObjectCreate(PI_d9,OBJ_HLINE,0,TimeCurrent(),PI_D9);
     ObjectCreate(PI_d10,OBJ_HLINE,0,TimeCurrent(),PI_D10);
     ObjectCreate(PI_d11,OBJ_HLINE,0,TimeCurrent(),PI_D11);
     ObjectCreate(PI_d12,OBJ_HLINE,0,TimeCurrent(),PI_D12);
     ObjectCreate(PI_d13,OBJ_HLINE,0,TimeCurrent(),PI_D13);
     ObjectCreate(PI_d14,OBJ_HLINE,0,TimeCurrent(),PI_D14);
     ObjectCreate(PI_d15,OBJ_HLINE,0,TimeCurrent(),PI_D15);
     ObjectCreate(PI_d16,OBJ_HLINE,0,TimeCurrent(),PI_D16);
     }
      //--------niveles de caracol
      IpaintFiboLineUP_2=NormalizeDouble((LEVELUP+(normalLevel*2)),NormalizaDigi);
      IpaintFiboLineUP_3=NormalizeDouble((IpaintFiboLineUP_2+(normalLevel*3)),NormalizaDigi);
      IpaintFiboLineUP_5=NormalizeDouble((IpaintFiboLineUP_3+(normalLevel*5)),NormalizaDigi);
      IpaintFiboLineUP_8=NormalizeDouble((IpaintFiboLineUP_5+(normalLevel*8)),NormalizaDigi);
      IpaintFiboLineUP_13=NormalizeDouble((IpaintFiboLineUP_8+(normalLevel*13)),NormalizaDigi);
      IpaintFiboLineUP_21=NormalizeDouble((IpaintFiboLineUP_13+(normalLevel*21)),NormalizaDigi);
      IpaintFiboLineUP_34=NormalizeDouble((IpaintFiboLineUP_21+(normalLevel*34)),NormalizaDigi);
      IpaintFiboLineUP_55=NormalizeDouble((IpaintFiboLineUP_34+(normalLevel*55)),NormalizaDigi);
      IpaintFiboLineUP_89=NormalizeDouble((IpaintFiboLineUP_55+(normalLevel*89)),NormalizaDigi);
      IpaintFiboLineUP_144=NormalizeDouble((IpaintFiboLineUP_89+(normalLevel*144)),NormalizaDigi);

      IpaintFiboLineDOWN_2=NormalizeDouble((LEVELDOWN-(normalLevel*2)),NormalizaDigi);
      IpaintFiboLineDOWN_3=NormalizeDouble((IpaintFiboLineDOWN_2-(normalLevel*3)),NormalizaDigi);
      IpaintFiboLineDOWN_5=NormalizeDouble((IpaintFiboLineDOWN_3-(normalLevel*5)),NormalizaDigi);
      IpaintFiboLineDOWN_8=NormalizeDouble((IpaintFiboLineDOWN_5-(normalLevel*8)),NormalizaDigi);
      IpaintFiboLineDOWN_13=NormalizeDouble((IpaintFiboLineDOWN_8-(normalLevel*13)),NormalizaDigi);
      IpaintFiboLineDOWN_21=NormalizeDouble((IpaintFiboLineDOWN_13-(normalLevel*21)),NormalizaDigi);
      IpaintFiboLineDOWN_34=NormalizeDouble((IpaintFiboLineDOWN_21-(normalLevel*34)),NormalizaDigi);
      IpaintFiboLineDOWN_55=NormalizeDouble((IpaintFiboLineDOWN_34-(normalLevel*55)),NormalizaDigi);
      IpaintFiboLineDOWN_89=NormalizeDouble((IpaintFiboLineDOWN_55-(normalLevel*89)),NormalizaDigi);
      IpaintFiboLineDOWN_144=NormalizeDouble((IpaintFiboLineDOWN_89-(normalLevel*144)),NormalizaDigi);
      //---Painting Lins-----
      //------загружаю цены в массив-----
      ArrayInitialize(LevelsAr,10);
      //-----Bool_N
      LevelsAr[1]=IpaintFiboLineUP_3;//0
      LevelsAr[2]=IpaintFiboLineUP_2;
      LevelsAr[3]=LEVELUP;
      LevelsAr[4]=LEVELDOWN;
      LevelsAr[5]=IpaintFiboLineDOWN_2;
      LevelsAr[6]=IpaintFiboLineDOWN_3;
      LevelsAr[7]=IpaintFiboLineDOWN_5;
      LevelsAr[8]=IpaintFiboLineDOWN_8;
      //-----Bear_N

      LevelsAr[9]=IpaintFiboLineDOWN_3;//0
      LevelsAr[10]=IpaintFiboLineDOWN_2;
      LevelsAr[11]=LEVELDOWN;
      LevelsAr[12]=LEVELUP;
      LevelsAr[13]=IpaintFiboLineUP_2;
      LevelsAr[14]=IpaintFiboLineUP_3;
      LevelsAr[15]=IpaintFiboLineUP_5;
      LevelsAr[16]=IpaintFiboLineUP_8;
      //---------------------------------
      //-----Bool_N
      LevelsArInd[1]=0;//0
      LevelsArInd[2]=-1;
      LevelsArInd[3]=-2;
      LevelsArInd[4]=-3;
      LevelsArInd[5]=-4;
      LevelsArInd[6]=-5;
      LevelsArInd[7]=-6;
      LevelsArInd[8]=-7;

      //-----Bear_N

      LevelsArInd[9]=0;//0
      LevelsArInd[10]=1;
      LevelsArInd[11]=2;
      LevelsArInd[12]=3;
      LevelsArInd[13]=4;
      LevelsArInd[14]=5;
      LevelsArInd[15]=6;
      LevelsArInd[16]=7;
      //---------------------------------

      ObjectCreate(Levelup_2,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_2);
      ObjectCreate(Levelup_3,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_3);
      ObjectCreate(Levelup_5,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_5);
      ObjectCreate(Levelup_8,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_8);
      ObjectCreate(Levelup_13,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_13);
      ObjectCreate(Levelup_21,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_21);
      ObjectCreate(Levelup_34,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_34);
      ObjectCreate(Levelup_55,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_55);
      ObjectCreate(Levelup_89,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_89);
      ObjectCreate(Levelup_144,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineUP_144);

      //---
      ObjectCreate(Leveldown_2,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_2);
      ObjectCreate(Leveldown_3,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_3);
      ObjectCreate(Leveldown_5,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_5);
      ObjectCreate(Leveldown_8,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_8);
      ObjectCreate(Leveldown_13,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_13);
      ObjectCreate(Leveldown_21,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_21);
      ObjectCreate(Leveldown_34,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_34);
      ObjectCreate(Leveldown_55,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_55);
      ObjectCreate(Leveldown_89,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_89);
      ObjectCreate(Leveldown_144,OBJ_HLINE,0,TimeCurrent(),IpaintFiboLineDOWN_144);

      ObjectSet(Levelup_2,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_3,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_5,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_8,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_13,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_21,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_34,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_55,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_89,OBJPROP_COLOR,clrLawnGreen);
      ObjectSet(Levelup_144,OBJPROP_COLOR,clrLawnGreen);

      ObjectSet(Leveldown_2,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_3,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_5,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_8,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_13,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_21,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_34,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_55,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_89,OBJPROP_COLOR,clrDarkViolet);
      ObjectSet(Leveldown_144,OBJPROP_COLOR,clrDarkViolet);
      //---Lines calculation------
      double DoublspredPoint=spredpoints*Point();
      //----можно как вариант расчитать до 13 уравня
      STOPforSELL=LEVELUP+DoublspredPoint;
      STOPforBUY=LEVELDOWN-DoublspredPoint;
      FIBAUP100=NormalizeDouble((LEVELDOWN+(((LEVELUP-LEVELDOWN)/IreceiveLevelresult)*100)),NormalizaDigi);//--ТП1
      FIBADOWN100=NormalizeDouble((LEVELUP-(((LEVELUP-LEVELDOWN)/IreceiveLevelresult)*100)),NormalizaDigi);//--ТП1
      FIBAUP300=NormalizeDouble(LEVELDOWN+(((LEVELDOWN-IpaintFiboLineDOWN_8)/5)*4),NormalizaDigi);//--ТП2 200
      FIBADOWN300=NormalizeDouble(LEVELUP-(((LEVELDOWN-IpaintFiboLineDOWN_8)/5)*4),NormalizaDigi);//--ТП2 200
      SellStop=NormalizeDouble(LEVELUP+((LEVELDOWN-IpaintFiboLineDOWN_8)/5),NormalizaDigi);//--Стопы для работы с отложенным ордером по ветке Селл
      BuyStop=NormalizeDouble(LEVELDOWN -((LEVELDOWN-IpaintFiboLineDOWN_8)/5),NormalizaDigi);

      TPBuy=NormalizeDouble(SellStop+(((LEVELDOWN-IpaintFiboLineDOWN_8)/5)*4),NormalizaDigi);
      TPSell=NormalizeDouble(BuyStop -(((LEVELDOWN-IpaintFiboLineDOWN_8)/5)*4),NormalizaDigi);
      //--100-400--1/4
      //--Levesl for StopEntrance
      StopLoss_StopEntranceBUY=BuyStop -((IpaintFiboLineUP_5-BuyStop)/5);
      StopLoss_StopEntranceSELL=SellStop +((IpaintFiboLineUP_5-BuyStop)/5);

      //---Painting Lins-----
      ObjectCreate(VERTICALLINE,OBJ_VLINE,0,bartimeresult,0);
      ObjectCreate(UPLINE,OBJ_HLINE,0,TimeCurrent(),LEVELUP);
      ObjectCreate(DOWNLINE,OBJ_HLINE,0,TimeCurrent(),LEVELDOWN);
      ObjectCreate(SELLSTOP,OBJ_HLINE,0,TimeCurrent(),SellStop);
      ObjectCreate(BUYSTOP,OBJ_HLINE,0,TimeCurrent(),BuyStop);
      //ObjectCreate(TPBUY,OBJ_HLINE,0,TimeCurrent(),TPBuy);
      //ObjectCreate(TPSELL,OBJ_HLINE,0,TimeCurrent(),TPSell);
      //ObjectCreate(FIBAup100,OBJ_HLINE,0,TimeCurrent(),FIBAUP100);
      //ObjectCreate(FIBAdown100,OBJ_HLINE,0,TimeCurrent(),FIBADOWN100);
      //ObjectCreate(FIBAup300,OBJ_HLINE,0,TimeCurrent(),FIBAUP300);
      //ObjectCreate(FIBAdown300,OBJ_HLINE,0,TimeCurrent(),FIBADOWN300);
      ObjectCreate(StopLoss_StopEntranceBuy,OBJ_HLINE,0,TimeCurrent(),StopLoss_StopEntranceBUY);
      ObjectCreate(StopLoss_StopEntranceSell,OBJ_HLINE,0,TimeCurrent(),StopLoss_StopEntranceSELL);
      //ObjectCreate(Platform_9_3_4_UP,OBJ_HLINE,0,TimeCurrent(),platform_9_3_4_UP);
      //ObjectCreate(Platform_9_3_4_DOWN,OBJ_HLINE,0,TimeCurrent(),platform_9_3_4_DOWN);
      //---Changing color----

      ObjectSet(SELLSTOP,OBJPROP_COLOR,clrOrange);
      ObjectSet(BUYSTOP,OBJPROP_COLOR,clrOrange);
      ObjectSet(DOWNLINE,OBJPROP_COLOR,clrGreen);
      ObjectSet(TPSELL,OBJPROP_COLOR,clrOrange);



      //-----------------------------------------------


      ObjectDelete(LimitOrders);
      ObjectCreate(0,LimitOrders,OBJ_BUTTON,0,bartimeresult,HIGHT+0.00015);
      ObjectSetInteger(0,LimitOrders,OBJPROP_XDISTANCE,CHWPX-280);
      ObjectSetInteger(0,LimitOrders,OBJPROP_YDISTANCE,140);
      string textLimitOrders="LIMIT";
      ObjectSetString(0,LimitOrders,OBJPROP_TEXT,textLimitOrders);
      ObjectSetInteger(0,LimitOrders,OBJPROP_COLOR,clrBlue);
      ObjectSetInteger(0,LimitOrders,OBJPROP_FONTSIZE,9);
      LimitOrdersstate=false;
      ObjectSetInteger(0,LimitOrders,OBJPROP_STATE,LimitOrdersstate);
      //long LimitOrdersbuttonpresed=ObjectGetInteger(0,LimitOrders,OBJPROP_STATE,0);

      ObjectDelete(StopOrders);
      ObjectCreate(0,StopOrders,OBJ_BUTTON,0,bartimeresult,HIGHT+0.00015);
      ObjectSetInteger(0,StopOrders,OBJPROP_XDISTANCE,CHWPX-210);
      ObjectSetInteger(0,StopOrders,OBJPROP_YDISTANCE,140);
      string textStopOrders="STOP";
      ObjectSetString(0,StopOrders,OBJPROP_TEXT,textStopOrders);
      ObjectSetInteger(0,StopOrders,OBJPROP_COLOR,clrBlue);
      ObjectSetInteger(0,StopOrders,OBJPROP_FONTSIZE,9);
      StopOrdersstate=false;
      ObjectSetInteger(0,StopOrders,OBJPROP_STATE,StopOrdersstate);

      // ObjectDelete(MarketOrders);
      // ObjectCreate(0,MarketOrders,OBJ_BUTTON,0,bartimeresult,HIGHT+0.00015);
      // ObjectSetInteger(0,MarketOrders,OBJPROP_XDISTANCE,CHWPX-140);
      // ObjectSetInteger(0,MarketOrders,OBJPROP_YDISTANCE,140);
      // string textMarketOrders="MARKET";
      // ObjectSetString(0,MarketOrders,OBJPROP_TEXT,textMarketOrders);
      // ObjectSetInteger(0,MarketOrders,OBJPROP_COLOR,clrRed);
      // ObjectSetInteger(0,MarketOrders,OBJPROP_FONTSIZE,9);
      // MarketOrdersstate=false;
      // ObjectSetInteger(0,MarketOrders,OBJPROP_STATE,MarketOrdersstate);
      //long MarketOrdersbuttonpresed=ObjectGetInteger(0,MarketOrders,OBJPROP_STATE,0);
      //-----------------------------------------------






      //temp dell 1
      //---Удаляю кнопку с графика
      ObjectDelete(Start);
      ObjectDelete(Obiekt503);

     }

   datetime BrTime=iTime(Symbol(),PERIOD_M1,1);

//------- Кнопка СТАРТ1 ------

   if(IsNewBar()==true)
     {




     }//--IsNewBar

   long IPressedStopOrdersbutton=ObjectGetInteger(0,StopOrders,OBJPROP_STATE,0);

   if(IPressedStopOrdersbutton==1)
     {
      ObjectDelete(MarketOrders);
      ObjectDelete(StopOrders);
      ObjectDelete(LimitOrders);
      ObjectDelete(Obiekt560);
      ObjectDelete(Obiekt561);
      ObjectDelete(Obiekt562);
      //--Button Buy--------------------
      if(TreilStop==true)
        {
         //---Група кнопок для оереноса уравня прибыли по сигналу
         ObjectDelete(TP5);
         ObjectCreate(0,TP5,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP5,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP5,OBJPROP_YDISTANCE,100);
         string textTP5="TP5";
         ObjectSetString(0,TP5,OBJPROP_TEXT,textTP5);
         ObjectSetInteger(0,TP5,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP5,OBJPROP_FONTSIZE,12);
         bool stateTP5=false;
         ObjectSetInteger(0,TP5,OBJPROP_STATE,stateTP5);
         //---
         ObjectDelete(TP8);
         ObjectCreate(0,TP8,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP8,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP8,OBJPROP_YDISTANCE,120);
         string textTP8="TP8";
         ObjectSetString(0,TP8,OBJPROP_TEXT,textTP8);
         ObjectSetInteger(0,TP8,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP8,OBJPROP_FONTSIZE,12);
         bool stateTP8=false;
         ObjectSetInteger(0,TP8,OBJPROP_STATE,stateTP8);
         //---
         //---Група кнопок для оереноса уравня прибыли по сигналу

         ObjectDelete(TP13);
         ObjectCreate(0,TP13,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP13,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP13,OBJPROP_YDISTANCE,140);
         string textTP13="TP13";
         ObjectSetString(0,TP13,OBJPROP_TEXT,textTP13);
         ObjectSetInteger(0,TP13,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP13,OBJPROP_FONTSIZE,12);
         bool stateTP13=false;
         ObjectSetInteger(0,TP13,OBJPROP_STATE,stateTP13);
         //---
         //---Група кнопок для оереноса уравня прибыли по сигналу

         ObjectDelete(TP21);
         ObjectCreate(0,TP21,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP21,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP21,OBJPROP_YDISTANCE,160);
         string textTP21="TP21";
         ObjectSetString(0,TP21,OBJPROP_TEXT,textTP21);
         ObjectSetInteger(0,TP21,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP21,OBJPROP_FONTSIZE,12);
         bool stateTP21=false;
         ObjectSetInteger(0,TP21,OBJPROP_STATE,stateTP21);
         //---
         //---Група кнопок для переноса Стопа в бу и выше
         ObjectDelete(SL0);
         ObjectCreate(0,SL0,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL0,OBJPROP_XDISTANCE,CHWPX-300);
         ObjectSetInteger(0,SL0,OBJPROP_YDISTANCE,80);
         string textSL0="SL0";
         ObjectSetString(0,SL0,OBJPROP_TEXT,textSL0);
         ObjectSetInteger(0,SL0,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL0,OBJPROP_FONTSIZE,12);
         bool stateSL0=false;
         ObjectSetInteger(0,SL0,OBJPROP_STATE,stateSL0);
         //---------------------------
         ObjectDelete(SL_1);
         ObjectCreate(0,SL_1,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL_1,OBJPROP_XDISTANCE,CHWPX-180);
         ObjectSetInteger(0,SL_1,OBJPROP_YDISTANCE,80);
         string textSL_1="SL-1";
         ObjectSetString(0,SL_1,OBJPROP_TEXT,textSL_1);
         ObjectSetInteger(0,SL_1,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL_1,OBJPROP_FONTSIZE,12);
         bool stateSL_1=false;
         ObjectSetInteger(0,SL_1,OBJPROP_STATE,stateSL_1);
         //---------------------------
         ObjectDelete(SL_2);
         ObjectCreate(0,SL_2,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL_2,OBJPROP_XDISTANCE,CHWPX-240);
         ObjectSetInteger(0,SL_2,OBJPROP_YDISTANCE,80);
         string textSL_2="SL-2";
         ObjectSetString(0,SL_2,OBJPROP_TEXT,textSL_2);
         ObjectSetInteger(0,SL_2,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL_2,OBJPROP_FONTSIZE,12);
         bool stateSL_2=false;
         ObjectSetInteger(0,SL_2,OBJPROP_STATE,stateSL_2);
         //---------------------------

         ObjectDelete(SL1);
         ObjectCreate(0,SL1,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL1,OBJPROP_XDISTANCE,CHWPX-120);
         ObjectSetInteger(0,SL1,OBJPROP_YDISTANCE,80);
         string textSL1="SL 1";
         ObjectSetString(0,SL1,OBJPROP_TEXT,textSL1);
         ObjectSetInteger(0,SL1,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL1,OBJPROP_FONTSIZE,12);
         bool stateSL1=false;
         ObjectSetInteger(0,SL1,OBJPROP_STATE,stateSL1);
         //---------------------------
         ObjectDelete(SL2);
         ObjectCreate(0,SL2,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL2,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,SL2,OBJPROP_YDISTANCE,80);
         string textSL2="SL 2";
         ObjectSetString(0,SL2,OBJPROP_TEXT,textSL2);
         ObjectSetInteger(0,SL2,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL2,OBJPROP_FONTSIZE,12);
         bool stateSL2=false;
         ObjectSetInteger(0,SL2,OBJPROP_STATE,stateSL2);
         //---------------------------
         ObjectDelete(SL3);
         ObjectCreate(0,SL3,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL3,OBJPROP_XDISTANCE,CHWPX-300);
         ObjectSetInteger(0,SL3,OBJPROP_YDISTANCE,100);
         string textSL3="SL 3";
         ObjectSetString(0,SL3,OBJPROP_TEXT,textSL3);
         ObjectSetInteger(0,SL3,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL3,OBJPROP_FONTSIZE,12);
         bool stateSL3=false;
         ObjectSetInteger(0,SL3,OBJPROP_STATE,stateSL3);
         //---------------------------
         ObjectDelete(SL5);
         ObjectCreate(0,SL5,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL5,OBJPROP_XDISTANCE,CHWPX-240);
         ObjectSetInteger(0,SL5,OBJPROP_YDISTANCE,100);
         string textSL5="SL 5";
         ObjectSetString(0,SL5,OBJPROP_TEXT,textSL5);
         ObjectSetInteger(0,SL5,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL5,OBJPROP_FONTSIZE,12);
         bool stateSL5=false;
         ObjectSetInteger(0,SL5,OBJPROP_STATE,stateSL5);
         //---------------------------
         ObjectDelete(SL8);
         ObjectCreate(0,SL8,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL8,OBJPROP_XDISTANCE,CHWPX-180);
         ObjectSetInteger(0,SL8,OBJPROP_YDISTANCE,100);
         string textSL8="SL 8";
         ObjectSetString(0,SL8,OBJPROP_TEXT,textSL8);
         ObjectSetInteger(0,SL8,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL5,OBJPROP_FONTSIZE,12);
         bool stateSL8=false;
         ObjectSetInteger(0,SL8,OBJPROP_STATE,stateSL8);
         //---------------------------
         //---------------------------
         ObjectDelete(SL13);
         ObjectCreate(0,SL13,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL13,OBJPROP_XDISTANCE,CHWPX-120);
         ObjectSetInteger(0,SL13,OBJPROP_YDISTANCE,100);
         string textSL13="SL 13";
         ObjectSetString(0,SL13,OBJPROP_TEXT,textSL13);
         ObjectSetInteger(0,SL13,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL13,OBJPROP_FONTSIZE,12);
         bool stateSL13=false;
         ObjectSetInteger(0,SL13,OBJPROP_STATE,stateSL13);
         //---------------------------
        }
      ObjectDelete(buybuttonStop);
      ObjectCreate(0,buybuttonStop,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
      ObjectSetInteger(0,buybuttonStop,OBJPROP_XDISTANCE,CHWPX-300);
      ObjectSetInteger(0,buybuttonStop,OBJPROP_YDISTANCE,135);
      string textbuybuttonStop="BUY";
      ObjectSetString(0,buybuttonStop,OBJPROP_TEXT,textbuybuttonStop);
      ObjectSetInteger(0,buybuttonStop,OBJPROP_COLOR,clrBlue);
      ObjectSetInteger(0,buybuttonStop,OBJPROP_FONTSIZE,14);
      bool buystateStop=false;
      ObjectSetInteger(0,buybuttonStop,OBJPROP_STATE,buystateStop);
      //long buybuttonStoppresed=ObjectGetInteger(0,buybuttonStop,OBJPROP_STATE,0);

      //---Button Sell--------------------
      //-------imag fibanachi-----
      //   string   filebuyarrow="\\Images\\ImagesExpertBinWave\\buyarrow.bmp";
      //-----------------------

      //int obiekt519=519;
      // Obiekt519=IntegerToString(obiekt519);
      // ObjectDelete(Obiekt519);
      // ObjectCreate(Obiekt519,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
      // ObjectSetString(0,Obiekt519,OBJPROP_BMPFILE,filebuyarrow);
      // ObjectSetInteger(0,Obiekt519,OBJPROP_XDISTANCE,CHWPX-250);
      // ObjectSetInteger(0,Obiekt519,OBJPROP_YDISTANCE,135);

      ObjectDelete(sellbuttonStop);
      ObjectCreate(0,sellbuttonStop,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
      ObjectSetInteger(0,sellbuttonStop,OBJPROP_XDISTANCE,CHWPX-230);
      ObjectSetInteger(0,sellbuttonStop,OBJPROP_YDISTANCE,135);
      string textsellbuttonStop="SELL";
      ObjectSetString(0,sellbuttonStop,OBJPROP_TEXT,textsellbuttonStop);
      ObjectSetInteger(0,sellbuttonStop,OBJPROP_COLOR,clrRed);
      ObjectSetInteger(0,sellbuttonStop,OBJPROP_FONTSIZE,14);
      bool sellstateStop=false;
      ObjectSetInteger(0,sellbuttonStop,OBJPROP_STATE,sellstateStop);
      // long sellbuttonStoppresed=ObjectGetInteger(0,sellbuttonStop,OBJPROP_STATE,0);
      //-------imag fibanachi-----
      //  string   filesellarrow="\\Images\\ImagesExpertBinWave\\sellarrow.bmp";
      //-----------------------
      //  int obiekt520=520;
      //  Obiekt520=IntegerToString(obiekt520);
      //  ObjectDelete(Obiekt520);
      //  ObjectCreate(Obiekt520,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
      //  ObjectSetString(0,Obiekt520,OBJPROP_BMPFILE,filesellarrow);
      //  ObjectSetInteger(0,Obiekt520,OBJPROP_XDISTANCE,CHWPX-180);
      //  ObjectSetInteger(0,Obiekt520,OBJPROP_YDISTANCE,135);

     }

//--Button Buy--------------------
   long IPressedbuybuttonStop=ObjectGetInteger(0,buybuttonStop,OBJPROP_STATE,0);
//---Button Sell--------------------
   long IPressedsellbuttonStop=ObjectGetInteger(0,sellbuttonStop,OBJPROP_STATE,0);
//-----------------Открытие позиции по рынку-------------
   if(IPressedbuybuttonStop==1 && IHaveticketBuy1==0)
     {
      /*Keylor Navas*/ IHaveticketBuy1=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen,BuyStop,Slippage,StopLoss_StopEntranceBUY,NULL,Coment,MagicBUYSTOP,0,clrLightPink);

      if(IHaveticketBuy1>0)
        {
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";
         //-----------------------
         dummyshort="800";
         ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(BuyStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBAUP300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(LEVELDOWN,5));
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;

         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;

         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,ChartExpertName," ",resultado1,"; ",IHaveticketBuy1," ; ",monyintrade," ; ",DayOfWeek()," ; ",windowsnumber);
            FileClose(file_handle3);
           }
        }

      int lastError=GetLastError();
      if(IPressedbuybuttonStop==1 && IHaveticketBuy1==-1 && lastError==130)
        {
         IPressedbuybuttonStop=ObjectSetInteger(0,buybuttonStop,OBJPROP_STATE,0);
         //sellbuttonStoppresed=ObjectSetInteger(0,sellbuttonStop,OBJPROP_STATE,0);
         ResetLastError();
         lastError=0;
         IHaveticketBuy1=0;
        }

      if(IHaveticketBuy1==-1)
        {
         ObjectSetInteger(0,buybutton,OBJPROP_STATE,buystate);
         Alert(" Order BUY is Not Opened !!! ");
         Comment(" Order BUY is Not Opened !!! ");
        }
      if(IHaveticketBuy1>0)
        {
         ObjectDelete(sellbuttonStop);
         ObjectDelete(buybuttonStop);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }
   if(IPressedsellbuttonStop==1 && IHaveticketSell1==0)
     {
      /*Keylor Navas*/ IHaveticketSell1=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen,SellStop,Slippage,StopLoss_StopEntranceSELL,NULL,Coment,MagicSELLSTOP,0,clrMoccasin);

      if(IHaveticketSell1>0)
        {
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
         //-----------------------
         dummyshort="800";
         //ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(SellStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBADOWN300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(LEVELUP,5));
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;


         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;
         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,ChartExpertName," ",resultado1," ",IHaveticketSell1," ",monyintrade," ",DayOfWeek()," ",windowsnumber);
            FileClose(file_handle3);
           }
        }

      int lastError=GetLastError();
      if(IPressedsellbuttonStop==1 && IHaveticketSell1==-1 && lastError==130)
        {
         //buybuttonStoppresed=ObjectSetInteger(0,buybuttonStop,OBJPROP_STATE,0);
         IPressedsellbuttonStop=ObjectSetInteger(0,sellbuttonStop,OBJPROP_STATE,0);
         ResetLastError();
         lastError=0;
         IHaveticketSell1=0;
        }
      if(IHaveticketSell1==0)
        {
         ObjectSetInteger(0,sellbutton,OBJPROP_STATE,sellstate);
         Alert(" Order SELL not Opened !!! ");
         Comment(" Order SELL not Opened !!! ");
        }
      if(IHaveticketSell1>0)
        {
         ObjectDelete(sellbuttonStop);
         ObjectDelete(buybuttonStop);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }

   long IPressedLimitOrdersbutton=ObjectGetInteger(0,LimitOrders,OBJPROP_STATE,0);
   if(IPressedLimitOrdersbutton==1)
     {
      ObjectDelete(MarketOrders);
      ObjectDelete(StopOrders);
      ObjectDelete(LimitOrders);
      ObjectDelete(Obiekt560);
      ObjectDelete(Obiekt561);
      ObjectDelete(Obiekt562);
      //--Button Buy--------------------
      if(TreilStop==true)
        {
         //---Група кнопок для оереноса уравня прибыли по сигналу
         ObjectDelete(TP5);
         ObjectCreate(0,TP5,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP5,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP5,OBJPROP_YDISTANCE,100);
         string textTP5="TP5";
         ObjectSetString(0,TP5,OBJPROP_TEXT,textTP5);
         ObjectSetInteger(0,TP5,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP5,OBJPROP_FONTSIZE,12);
         bool stateTP5=false;
         ObjectSetInteger(0,TP5,OBJPROP_STATE,stateTP5);
         //---
         ObjectDelete(TP8);
         ObjectCreate(0,TP8,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP8,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP8,OBJPROP_YDISTANCE,120);
         string textTP8="TP8";
         ObjectSetString(0,TP8,OBJPROP_TEXT,textTP8);
         ObjectSetInteger(0,TP8,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP8,OBJPROP_FONTSIZE,12);
         bool stateTP8=false;
         ObjectSetInteger(0,TP8,OBJPROP_STATE,stateTP8);
         //---
         //---Група кнопок для оереноса уравня прибыли по сигналу

         ObjectDelete(TP13);
         ObjectCreate(0,TP13,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP13,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP13,OBJPROP_YDISTANCE,140);
         string textTP13="TP13";
         ObjectSetString(0,TP13,OBJPROP_TEXT,textTP13);
         ObjectSetInteger(0,TP13,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP13,OBJPROP_FONTSIZE,12);
         bool stateTP13=false;
         ObjectSetInteger(0,TP13,OBJPROP_STATE,stateTP13);
         //---
         //---Група кнопок для оереноса уравня прибыли по сигналу

         ObjectDelete(TP21);
         ObjectCreate(0,TP21,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,TP21,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,TP21,OBJPROP_YDISTANCE,160);
         string textTP21="TP21";
         ObjectSetString(0,TP21,OBJPROP_TEXT,textTP21);
         ObjectSetInteger(0,TP21,OBJPROP_COLOR,clrGreen);
         ObjectSetInteger(0,TP21,OBJPROP_FONTSIZE,12);
         bool stateTP21=false;
         ObjectSetInteger(0,TP21,OBJPROP_STATE,stateTP21);
         //---
         //---Група кнопок для переноса Стопа в бу и выше
         ObjectDelete(SL0);
         ObjectCreate(0,SL0,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL0,OBJPROP_XDISTANCE,CHWPX-300);
         ObjectSetInteger(0,SL0,OBJPROP_YDISTANCE,80);
         string textSL0="SL0";
         ObjectSetString(0,SL0,OBJPROP_TEXT,textSL0);
         ObjectSetInteger(0,SL0,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL0,OBJPROP_FONTSIZE,12);
         bool stateSL0=false;
         ObjectSetInteger(0,SL0,OBJPROP_STATE,stateSL0);
         //---------------------------
         ObjectDelete(SL_1);
         ObjectCreate(0,SL_1,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL_1,OBJPROP_XDISTANCE,CHWPX-180);
         ObjectSetInteger(0,SL_1,OBJPROP_YDISTANCE,80);
         string textSL_1="SL-1";
         ObjectSetString(0,SL_1,OBJPROP_TEXT,textSL_1);
         ObjectSetInteger(0,SL_1,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL_1,OBJPROP_FONTSIZE,12);
         bool stateSL_1=false;
         ObjectSetInteger(0,SL_1,OBJPROP_STATE,stateSL_1);
         //---------------------------
         ObjectDelete(SL_2);
         ObjectCreate(0,SL_2,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL_2,OBJPROP_XDISTANCE,CHWPX-240);
         ObjectSetInteger(0,SL_2,OBJPROP_YDISTANCE,80);
         string textSL_2="SL-2";
         ObjectSetString(0,SL_2,OBJPROP_TEXT,textSL_2);
         ObjectSetInteger(0,SL_2,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL_2,OBJPROP_FONTSIZE,12);
         bool stateSL_2=false;
         ObjectSetInteger(0,SL_2,OBJPROP_STATE,stateSL_2);
         //---------------------------

         ObjectDelete(SL1);
         ObjectCreate(0,SL1,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL1,OBJPROP_XDISTANCE,CHWPX-120);
         ObjectSetInteger(0,SL1,OBJPROP_YDISTANCE,80);
         string textSL1="SL 1";
         ObjectSetString(0,SL1,OBJPROP_TEXT,textSL1);
         ObjectSetInteger(0,SL1,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL1,OBJPROP_FONTSIZE,12);
         bool stateSL1=false;
         ObjectSetInteger(0,SL1,OBJPROP_STATE,stateSL1);
         //---------------------------
         ObjectDelete(SL2);
         ObjectCreate(0,SL2,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL2,OBJPROP_XDISTANCE,CHWPX-60);
         ObjectSetInteger(0,SL2,OBJPROP_YDISTANCE,80);
         string textSL2="SL 2";
         ObjectSetString(0,SL2,OBJPROP_TEXT,textSL2);
         ObjectSetInteger(0,SL2,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL2,OBJPROP_FONTSIZE,12);
         bool stateSL2=false;
         ObjectSetInteger(0,SL2,OBJPROP_STATE,stateSL2);
         //---------------------------
         ObjectDelete(SL3);
         ObjectCreate(0,SL3,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL3,OBJPROP_XDISTANCE,CHWPX-300);
         ObjectSetInteger(0,SL3,OBJPROP_YDISTANCE,100);
         string textSL3="SL 3";
         ObjectSetString(0,SL3,OBJPROP_TEXT,textSL3);
         ObjectSetInteger(0,SL3,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL3,OBJPROP_FONTSIZE,12);
         bool stateSL3=false;
         ObjectSetInteger(0,SL3,OBJPROP_STATE,stateSL3);
         //---------------------------
         ObjectDelete(SL5);
         ObjectCreate(0,SL5,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL5,OBJPROP_XDISTANCE,CHWPX-240);
         ObjectSetInteger(0,SL5,OBJPROP_YDISTANCE,100);
         string textSL5="SL 5";
         ObjectSetString(0,SL5,OBJPROP_TEXT,textSL5);
         ObjectSetInteger(0,SL5,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL5,OBJPROP_FONTSIZE,12);
         bool stateSL5=false;
         ObjectSetInteger(0,SL5,OBJPROP_STATE,stateSL5);
         //---------------------------
         ObjectDelete(SL8);
         ObjectCreate(0,SL8,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL8,OBJPROP_XDISTANCE,CHWPX-180);
         ObjectSetInteger(0,SL8,OBJPROP_YDISTANCE,100);
         string textSL8="SL 8";
         ObjectSetString(0,SL8,OBJPROP_TEXT,textSL8);
         ObjectSetInteger(0,SL8,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL5,OBJPROP_FONTSIZE,12);
         bool stateSL8=false;
         ObjectSetInteger(0,SL8,OBJPROP_STATE,stateSL8);
         //---------------------------
         //---------------------------
         ObjectDelete(SL13);
         ObjectCreate(0,SL13,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
         ObjectSetInteger(0,SL13,OBJPROP_XDISTANCE,CHWPX-120);
         ObjectSetInteger(0,SL13,OBJPROP_YDISTANCE,100);
         string textSL13="SL 13";
         ObjectSetString(0,SL13,OBJPROP_TEXT,textSL13);
         ObjectSetInteger(0,SL13,OBJPROP_COLOR,clrRed);
         ObjectSetInteger(0,SL13,OBJPROP_FONTSIZE,12);
         bool stateSL13=false;
         ObjectSetInteger(0,SL13,OBJPROP_STATE,stateSL13);
         //---------------------------
        }
      ObjectDelete(buybuttonLimit);
      ObjectCreate(0,buybuttonLimit,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
      ObjectSetInteger(0,buybuttonLimit,OBJPROP_XDISTANCE,CHWPX-300);
      ObjectSetInteger(0,buybuttonLimit,OBJPROP_YDISTANCE,135);
      string textbuybuttonLimit="BUY";
      ObjectSetString(0,buybuttonLimit,OBJPROP_TEXT,textbuybuttonLimit);
      ObjectSetInteger(0,buybuttonLimit,OBJPROP_COLOR,clrBlue);
      ObjectSetInteger(0,buybuttonLimit,OBJPROP_FONTSIZE,14);
      bool buystateLimit=false;
      ObjectSetInteger(0,buybutton,OBJPROP_STATE,buystateLimit);
      //long buybuttonLimitpresed=ObjectGetInteger(0,buybuttonLimit,OBJPROP_STATE,0);

      //---Button Sell--------------------
      //-------imag fibanachi-----
      string   filebuyarrow="\\Images\\ImagesExpertBinWave\\buyarrow.bmp";
      //-----------------------

      int obiekt519=519;
      Obiekt519=IntegerToString(obiekt519);
      ObjectDelete(Obiekt519);
      ObjectCreate(Obiekt519,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
      ObjectSetString(0,Obiekt519,OBJPROP_BMPFILE,filebuyarrow);
      ObjectSetInteger(0,Obiekt519,OBJPROP_XDISTANCE,CHWPX-250);
      ObjectSetInteger(0,Obiekt519,OBJPROP_YDISTANCE,135);

      ObjectDelete(sellbuttonLimit);
      ObjectCreate(0,sellbuttonLimit,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
      ObjectSetInteger(0,sellbuttonLimit,OBJPROP_XDISTANCE,CHWPX-230);
      ObjectSetInteger(0,sellbuttonLimit,OBJPROP_YDISTANCE,135);
      string textsellbuttonLimit="SELL";
      ObjectSetString(0,sellbuttonLimit,OBJPROP_TEXT,textsellbuttonLimit);
      ObjectSetInteger(0,sellbuttonLimit,OBJPROP_COLOR,clrRed);
      ObjectSetInteger(0,sellbuttonLimit,OBJPROP_FONTSIZE,14);
      bool sellstateLimit=false;
      ObjectSetInteger(0,sellbutton,OBJPROP_STATE,sellstateLimit);
      // long sellbuttonLimitpresed=ObjectGetInteger(0,sellbuttonLimit,OBJPROP_STATE,0);
      //-------imag fibanachi-----
      string   filesellarrow="\\Images\\ImagesExpertBinWave\\sellarrow.bmp";
      //-----------------------
      int obiekt520=520;
      Obiekt520=IntegerToString(obiekt520);
      ObjectDelete(Obiekt520);
      ObjectCreate(Obiekt520,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
      ObjectSetString(0,Obiekt520,OBJPROP_BMPFILE,filesellarrow);
      ObjectSetInteger(0,Obiekt520,OBJPROP_XDISTANCE,CHWPX-180);
      ObjectSetInteger(0,Obiekt520,OBJPROP_YDISTANCE,135);

      //---Выбор цены входа из массива
      int im;//Индикатор
      for(im=1; im<9; im++)
        {
         if(LevelsArInd[im]==indBoolN)//Получение цены по индексу Индикатор BoolN Если
           {
            //Print(LevelsAr[im]," ",LevelsArInd[im]);
            break;
           }
        }

     }

//--Button Buy--------------------
   long IPressedbuybuttonLimit=ObjectGetInteger(0,buybuttonLimit,OBJPROP_STATE,0);
//---Button Sell--------------------
   long IPressedsellbuttonLimit=ObjectGetInteger(0,sellbuttonLimit,OBJPROP_STATE,0);
//-----------------Открытие позиции по рынку-------------
   if(IPressedbuybuttonLimit==1 && IHaveticketBuy1==0)
     {

      //-----------------------------
      //  StopLoss_StopEntranceBUY
      //  StopLoss_StopEntranceSELL BuyStop
      //  SellStop
      //  BuyStop
      /*LinYao*/IHaveticketBuy1=OrderSend(Symbol(),OP_BUYLIMIT,LotsVolumen,BuyStop,Slippage,StopLoss_StopEntranceBUY,NULL,Coment,MagicBUYSTOP,0,clrLightPink);

      if(IHaveticketBuy1>0)
        {
         //-------
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";

         //-----------------------
         dummyshort="800";
         ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(BuyStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBAUP300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(LEVELDOWN,5));
         //-------
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;

         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;
         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,ChartExpertName," ",resultado1," ",IHaveticketBuy1," ",monyintrade," ",DayOfWeek()," ",windowsnumber);
            FileClose(file_handle3);
           }
        }
      int lastError=GetLastError();
      if(IPressedbuybuttonLimit==1 && IHaveticketBuy1==-1 && lastError==130)
        {
         IPressedbuybuttonLimit=ObjectSetInteger(0,buybuttonLimit,OBJPROP_STATE,0);
         //sellbuttonStoppresed=ObjectSetInteger(0,sellbuttonStop,OBJPROP_STATE,0);
         ResetLastError();
         lastError=0;
         IHaveticketBuy1=0;
        }
      if(IHaveticketBuy1==-1)
        {
         ObjectSetInteger(0,buybutton,OBJPROP_STATE,buystate);
         Alert(" Order BUY Not Opened !!! ");
         Comment(" Order BUY Not Opened !!! ");
        }
      if(IHaveticketBuy1>0)
        {
         ObjectDelete(sellbuttonLimit);
         ObjectDelete(buybuttonLimit);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }
   if(IPressedsellbuttonLimit==1 && IHaveticketSell1==0)
     {
      //-----------------------------
      //StopLoss_StopEntranceSELL=LevelsAr[im];//Присваиваю цену для открытия по индикатору
      //Profit=LevelsAr[7]//Профит
      //SellStop=LevelsAr[im]+((LevelsAr[im]-LevelsAr[7])/4)//Стоп

      //  StopLoss_StopEntranceSELL BuyStop
      /*Keylor Navas*/IHaveticketSell1=OrderSend(Symbol(),OP_SELLLIMIT,LotsVolumen,SellStop,Slippage,StopLoss_StopEntranceSELL,NULL,Coment,MagicSELLSTOP,0,clrMoccasin);
      Print(" вход ",SellStop," Стоп ",StopLoss_StopEntranceSELL);
      if(IHaveticketSell1>0)
        {
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
         //-----------------------
         dummyshort="800";
         //ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(SellStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBADOWN300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(LEVELUP,5));
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;

         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;
         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,resultado1," ",IHaveticketSell1," ",monyintrade," ",DayOfWeek()," ",windowsnumber);
            FileClose(file_handle3);
           }
        }
      int lastError=GetLastError();
      if(IPressedsellbuttonLimit==1 && IHaveticketBuy1==-1 && lastError==130)
        {
         IPressedsellbuttonLimit=ObjectSetInteger(0,sellbuttonLimit,OBJPROP_STATE,0);
         ResetLastError();
         lastError=0;
         IHaveticketSell1=0;
        }
      if(IHaveticketSell1==0)
        {
         ObjectSetInteger(0,sellbutton,OBJPROP_STATE,sellstate);
         Alert(" Order SELL Not Opened !!! ");
         Comment(" Order SELL Not Opened !!! ");
        }
      if(IHaveticketSell1>0)
        {
         ObjectDelete(sellbuttonLimit);
         ObjectDelete(buybuttonLimit);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }

// long IPressedMarketOrdersbutton=ObjectGetInteger(0,MarketOrders,OBJPROP_STATE,0);
// if(IPressedMarketOrdersbutton==1)
//   {
//    ObjectDelete(MarketOrders);
//    ObjectDelete(StopOrders);
//    ObjectDelete(LimitOrders);
//    ObjectDelete(Obiekt560);
//    ObjectDelete(Obiekt561);
//    ObjectDelete(Obiekt562);
//--Button Buy--------------------

//    ObjectDelete(buybutton);
//    ObjectCreate(0,buybutton,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
//    ObjectSetInteger(0,buybutton,OBJPROP_XDISTANCE,CHWPX-300);
//    ObjectSetInteger(0,buybutton,OBJPROP_YDISTANCE,135);
//    string textbuybutton="BUY";
//    ObjectSetString(0,buybutton,OBJPROP_TEXT,textbuybutton);
//    ObjectSetInteger(0,buybutton,OBJPROP_COLOR,clrBlue);
//    ObjectSetInteger(0,buybutton,OBJPROP_FONTSIZE,14);
//    buystate=false;
//    ObjectSetInteger(0,buybutton,OBJPROP_STATE,buystate);
//long buybuttonpresed=ObjectGetInteger(0,buybutton,OBJPROP_STATE,0);

//---Button Sell--------------------
//-------imag fibanachi-----
//  string   filebuyarrow="\\Images\\ImagesExpertBinWave\\buyarrow.bmp";
//-----------------------

//  int obiekt519=519;
//  Obiekt519=IntegerToString(obiekt519);
// ObjectDelete(Obiekt519);
// ObjectCreate(Obiekt519,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
// ObjectSetString(0,Obiekt519,OBJPROP_BMPFILE,filebuyarrow);
// ObjectSetInteger(0,Obiekt519,OBJPROP_XDISTANCE,CHWPX-250);
// ObjectSetInteger(0,Obiekt519,OBJPROP_YDISTANCE,135);

// ObjectDelete(sellbutton);
//  ObjectCreate(0,sellbutton,OBJ_BUTTON,0,BrTime,HIGHT+0.00015);
// ObjectSetInteger(0,sellbutton,OBJPROP_XDISTANCE,CHWPX-230);
// ObjectSetInteger(0,sellbutton,OBJPROP_YDISTANCE,135);
// string textsellbutton="SELL";
// ObjectSetString(0,sellbutton,OBJPROP_TEXT,textsellbutton);
// ObjectSetInteger(0,sellbutton,OBJPROP_COLOR,clrRed);
// ObjectSetInteger(0,sellbutton,OBJPROP_FONTSIZE,14);
// sellstate=false;
// ObjectSetInteger(0,sellbutton,OBJPROP_STATE,sellstate);
// long sellbuttonpresed=ObjectGetInteger(0,sellbutton,OBJPROP_STATE,0);
//-------imag fibanachi-----
//  string   filesellarrow="\\Images\\ImagesExpertBinWave\\sellarrow.bmp";
//-----------------------
//  int obiekt520=520;
// Obiekt520=IntegerToString(obiekt520);
// ObjectDelete(Obiekt520);
//  ObjectCreate(Obiekt520,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
//  ObjectSetString(0,Obiekt520,OBJPROP_BMPFILE,filesellarrow);
//  ObjectSetInteger(0,Obiekt520,OBJPROP_XDISTANCE,CHWPX-180);
//  ObjectSetInteger(0,Obiekt520,OBJPROP_YDISTANCE,135);

//}
//--Button Buy--------------------
   long IPressedbuybutton=ObjectGetInteger(0,buybutton,OBJPROP_STATE,0);
//---Button Sell--------------------
   long IPressedsellbutton=ObjectGetInteger(0,sellbutton,OBJPROP_STATE,0);
//-----------------Открытие позиции по рынку-------------
   if(IPressedbuybutton==1 && IHaveticketBuy1==0)
     {
      /*Keylor Navas*/ IHaveticketBuy1=OrderSend(Symbol(),OP_BUY,LotsVolumen,Ask,Slippage,BuyStop,IpaintFiboLineUP_5," Volumens Kristyna Kopanitska ",MagicBUYSTOP,0,clrLightPink);

      //--future viewer------
      if(IHaveticketBuy1>0)
        {
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";
         //-----------------------
         dummyshort="800";
         //ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(BuyStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBAUP300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(Ask,5));
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;

         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;
         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,ChartExpertName," ",resultado1," ",IHaveticketBuy1," ",monyintrade," ",DayOfWeek()," ",windowsnumber);
            FileClose(file_handle3);
           }
        }
      //--------------------
      if(IHaveticketBuy1==-1)
        {
         ObjectSetInteger(0,buybutton,OBJPROP_STATE,buystate);
         Alert(" Order BUY Not Opened !!! ");
         Comment(" Order BUY Not Opened !!! ");
        }
      if(IHaveticketBuy1>0)
        {
         ObjectDelete(buybutton);
         ObjectDelete(sellbutton);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }
   if(IPressedsellbutton==1 && IHaveticketSell1==0)
     {
      /*Keylor Navas*/IHaveticketSell1=OrderSend(Symbol(),OP_SELL,LotsVolumen,Bid,Slippage,SellStop,IpaintFiboLineDOWN_5," Volumens Kristyna Kopanitska ",MagicSELLSTOP,0,clrMoccasin);
      if(IHaveticketSell1>0)
        {
         string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
         //-----------------------
         dummyshort="800";
         //ObjectDelete(dummyshort);

         //ObjectCreate(dummyshort,OBJ_BITMAP_LABEL,0,BrTime,HIGHT+0.00015);
         //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);
         //ObjectSetInteger(0,dummyshort,OBJPROP_XDISTANCE,42);
         //ObjectSetInteger(0,dummyshort,OBJPROP_YDISTANCE,150);
         //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(SellStop,5));
         //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(FIBADOWN300,5));
         //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(Bid,5));
         stoppoints=((LEVELDOWN-IpaintFiboLineDOWN_8)/5);
         DeposittoTrade=(AccountBalance()/100)*deopsitpercent;
         ICalculateStopfortrade1=stoppoints*1;
         ICalculateStopfortrade2=stoppoints*1;
         ICalculateStopfortrade3=stoppoints*1;
         ICalculateStopfortrade4=stoppoints*3;
         ICalculateStopfortrade5=stoppoints*2;
         ICalculateStopfortrade6=stoppoints*8;

         resultado1=(ICalculateStopfortrade1+ICalculateStopfortrade2+ICalculateStopfortrade3+ICalculateStopfortrade4+ICalculateStopfortrade5+ICalculateStopfortrade6)/0.00001;
         double monyintrade=resultado1*LotsVolumen;
         int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");
         if(file_handle3>0)
           {
            FileSeek(file_handle3,0,SEEK_END);
            FileWrite(file_handle3,ChartExpertName," ",resultado1," ",IHaveticketSell1," ",monyintrade," ",DayOfWeek(),windowsnumber);
            FileClose(file_handle3);
           }
        }
      //--------------------
      if(IHaveticketSell1==0)
        {
         ObjectSetInteger(0,sellbutton,OBJPROP_STATE,sellstate);
         Alert(" Order SELL Not Opened !!! ");
         Comment(" Order SELL Not Opened !!! ");
        }
      if(IHaveticketSell1>0)
        {
         ObjectDelete(sellbutton);
         ObjectDelete(buybutton);
         ObjectDelete(Obiekt519);
         ObjectDelete(Obiekt520);
        }
     }
//---------------Снятие лимитных Ордеров-------------
//if(IHaveticketBuy1>0)
//  {
//  if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && (OrderType()==OP_BUYLIMIT || OrderType()==OP_BUYSTOP)&& OrderSymbol()==Symbol())
//   {
//   if(Bid>=IpaintFiboLineUP_5)
//     {
//      int chek10=OrderDelete(IHaveticketBuy1);
//      Alert(" ticketBuy1 is delited Reopenit ");
//     }

//  }
// }

// if(IHaveticketSell1>0)
//   {
//   if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()==0 && (OrderType()==OP_SELLLIMIT || OrderType()==OP_SELLSTOP)&& OrderSymbol()==Symbol())
//    {
//    if(Bid<=IpaintFiboLineDOWN_5)
//     {
//      int chek11=OrderDelete(IHaveticketSell1);
//     Alert(" ticketSell1 is Delited Reopenit ");
//   }

//   }
//}


//-------------------------------------------------------

   RefreshRates();


//+------------------------------------------------------------------+
   if(IHaveticketBuy7>0)
     {
      if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek14=OrderDelete(IHaveticketSell8);
            if(chek14==true)
              {

               //ticketSell8=0;ticketBuy8=0;ticketSell7=0;ticketBuy7=0;ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               // ObjectDelete(Obiekt715);
               // ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               // ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               // ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               // ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=7;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                     //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }
//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketSell7>0)
     {
      if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek13=OrderDelete(IHaveticketBuy8);
            if(chek13==true)
              {

               //ticketSell8=0;ticketBuy8=0;ticketSell7=0;ticketBuy7=0; ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=7;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }

//----------------------------------------------------------------------------------
   if(IHaveticketSell7>0)
     {
      if(OrderSelect(IHaveticketBuy6,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek12=OrderDelete(IHaveticketSell7);
            if(chek12==true)
              {

               //ticketSell7=0;ticketBuy7=0;ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=6;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                     //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }
//----------------------------------
//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy7>0)
     {
      if(OrderSelect(IHaveticketSell6,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek11=OrderDelete(IHaveticketBuy7);
            if(chek11==true)
              {

               //ticketSell7=0;ticketBuy7=0; ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=6;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                     //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }

//----------------------------------------------------------------------------------
   if(IHaveticketSell6>0)
     {
      if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek10=OrderDelete(IHaveticketSell6);
            if(chek10==true)
              {

               //ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=5;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }
           }
        }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy6>0)
     {
      if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek9=OrderDelete(IHaveticketBuy6);
            if(chek9==true)
              {

               //ticketSell6=0;ticketBuy6=0;ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=5;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }
           }
        }
     }

//----------------------------------------------------------------------------------
   if(IHaveticketSell5>0)
     {
      if(OrderSelect(IHaveticketBuy4,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP3*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek8=OrderDelete(IHaveticketSell5);
            if(chek8==true)
              {

               // ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=4;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                     //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }
           }
        }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy5>0)
     {
      if(OrderSelect(IHaveticketSell4,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek7=OrderDelete(IHaveticketBuy5);
            if(chek7==true)
              {

               //ticketSell5=0;ticketBuy5=0;ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=4;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                     //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }

//---------------------------Снятие третьего  ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketSell4>0)
     {
      if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek6=OrderDelete(IHaveticketSell4);
            if(chek6==true)
              {

               //ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=3;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy4>0)
     {
      if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek5=OrderDelete(IHaveticketBuy4);
            if(chek5==true)
              {
               // int file_handle3=FileOpen(FileName3,FILE_READ|FILE_WRITE," ");

               //ticketSell4=0;ticketBuy4=0;ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=3;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }
           }
        }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketSell3>0)
     {
      if(OrderSelect(IHaveticketBuy2,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek4=OrderDelete(IHaveticketSell3);
            if(chek4==true)
              {

               //ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=2;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }
           }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy3>0)
     {
      if(OrderSelect(IHaveticketSell2,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek3=OrderDelete(IHaveticketBuy3);
            if(chek3==true)
              {

               //ticketSell3=0;ticketBuy3=0;ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=2;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
              }

           }
        }
     }

//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketBuy2>0)
     {
      if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL /*&& OrderMagicNumber()==MagicSELLSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {

            bool chek2=OrderDelete(IHaveticketBuy2);
            if(chek2==true)
              {

               //ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,TimeCurrent(),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=1;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }
               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }
//-----------------------Снятие второго ордера в случаи Профита первого-----------------------------------------
   if(IHaveticketSell2>0)
     {
      if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {

            bool chek1=OrderDelete(IHaveticketSell2);
            if(chek1==true)
              {


               //ticketSell2=0;ticketBuy2=0;ticketSell1=0;ticketBuy1=0;
               Alert(" TAKEPROFIT ");
               //----Laik----
               //ObjectDelete(Obiekt715);
               //ObjectCreate(0,Obiekt715,OBJ_ARROW_THUMB_UP,0,iTime(Symbol(),PERIOD_M1,1),OrderClosePrice());
               //ObjectSetInteger(0,Obiekt715,OBJPROP_WIDTH,5);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_COLOR,clrRed);
               //ObjectSetInteger(0,Obiekt715,OBJPROP_STYLE,STYLE_SOLID);
               //------------

               //---Если данные небыли внисены в базу то внести в базу колличество тикетов и отметку 1
               //--Присвоить по индексу
               if(WriteDatatuDB==1)
                 {
                  //body[ib,31]=1;//Тикеты
                  //body[ib,32]=1;//Профит Лосс

                  // -- записать в массив
                  FileDelete(FileName6,0);

                  int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
                  if(file_handle6>0)
                    {

                     FileSeek(file_handle6,0,SEEK_CUR);

                    // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                     FileClose(file_handle6);
                     Comment("Data is Writed - Tickets and Profit");
                    }
                  else
                     Comment("Data is NOT Writed - Tickets and Profit");
                 }


               if(onInit==true)
                 {
                  OnInit();
                 }
              }

           }
        }
     }
//---Снятие второго ордера после модификации первого в безубыток
   if(IHaveticketBuy1>0 && IHaveticketSell2==0)
     {
      if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderOpenPrice()==OrderStopLoss())//Сравниваю цену открытия и цену закрытия если равны
           {

            bool ch=OrderDelete(IHaveticketSell2,clrAzure);

           }
        }

     }
//---
   if(IHaveticketSell1>0 && IHaveticketBuy2==0)
     {
      if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderOpenPrice()==OrderStopLoss())//Сравниваю цену открытия и цену закрытия если равны
           {

            bool ch=OrderDelete(IHaveticketBuy2,clrAzure);

           }
        }

     }
   if(IHaveticketBuy3>0 && IHaveticketSell4==0)
     {
      if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderOpenPrice()==OrderStopLoss())//Сравниваю цену открытия и цену закрытия если равны
           {

            bool ch=OrderDelete(IHaveticketSell4,clrAzure);

           }
        }

     }
//---
   if(IHaveticketSell3>0 && IHaveticketBuy4==0)
     {
      if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderOpenPrice()==OrderStopLoss())//Сравниваю цену открытия и цену закрытия если равны
           {

            bool ch=OrderDelete(IHaveticketBuy4,clrAzure);

           }
        }

     }
//-----------------------------------------------

   if(IHaveticketBuy1>0 && IHaveticketSell2==0)
     {
      if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {



         double OpPriceSELL=NormalizeDouble(StopLoss_StopEntranceBUY,5);
         double StopLossSELL=BuyStop;
         double CenaTakeProfitSELL=NormalizeDouble(StopLoss_StopEntranceBUY-(BuyStop-StopLoss_StopEntranceBUY),5);

         if(IHaveticketSell2==0)
           {

            /*Carvajal*/ IHaveticketSell2=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer1_1,OpPriceSELL,Slippage,StopLossSELL,CenaTakeProfitSELL,Coment,MagicSELLSTOP1,0,clrDarkGoldenrod);
            string textrevers="1";
            ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
            //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer1,2);
            //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
            //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL,5));
            //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL,5));
            //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL,5));
            //string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
            //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

           }

        }
     }

//------------------------------
   if(IHaveticketSell1>0 && IHaveticketBuy2==0)
     {
      if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL /*&& OrderMagicNumber()==MagicSELLSTOP*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         //  StopLoss_StopEntranceSELL BuyStop
         double OpPriceBUY=NormalizeDouble(StopLoss_StopEntranceSELL,5);
         double StopLossBUY=SellStop;
         double CenaTakeProfitBUY=NormalizeDouble(StopLoss_StopEntranceSELL+(StopLoss_StopEntranceSELL-SellStop),5);

         if(IHaveticketBuy2==0)
           {
            /*Carvajal*/IHaveticketBuy2=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer1_1,OpPriceBUY,Slippage,StopLossBUY,CenaTakeProfitBUY,Coment,MagicBUYSTOP1,0,clrAqua);
            string textrevers="1";
            ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
            //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer1,2);
            //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
            //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY,5));
            //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY,5));
            //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY,5));
            //string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";
            //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

           }

        }

     }
//-------------------------------------------------------------------
//----------------------------------
   if(IHaveticketBuy2>0 && IHaveticketSell3==0)
     {
      if(OrderSelect(IHaveticketBuy2,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP1*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_SELL /*&& OrderMagicNumber()==MagicBUYSTOP1*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
           {
            double OpPriceSELL2=OrderOpenPrice();
            double StopLossSELL2=OrderStopLoss();
            double CenaTakeProfitSELL2=OrderTakeProfit();
            if(IHaveticketSell3==0)
              {
               /*Vallejo*/IHaveticketSell3=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer1,OpPriceSELL2,Slippage,StopLossSELL2,NULL,Coment,MagicSELLSTOP2,0,clrMoccasin);
               string textrevers="2";
               ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
               //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer2,2);
               //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
               //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL2,5));
               //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL2,5));
               //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL2,5));
               //string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
               //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

              }

           }
        }
     }
//------------------------------------------------
//----------------------------------
   if(IHaveticketSell2>0 && IHaveticketBuy3==0)
     {
      if(OrderSelect(IHaveticketSell2,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {
         if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            double OpPriceBUY2=OrderOpenPrice();
            double StopLossBUY2=OrderStopLoss();
            double CenaTakeProfitBUY2=OrderTakeProfit();
            if(IHaveticketBuy3==0)
              {
               /*Vallejo*/  IHaveticketBuy3=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer1,OpPriceBUY2,Slippage,StopLossBUY2,NULL,Coment,MagicBUYSTOP2,0,clrLightPink);
               string textrevers="2";
               ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
               //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer2,2);
               //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
               //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY2,5));
               //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY2,5));
               //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY2,5));
               //string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";
               //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

              }

           }
        }

     }

//-----------------------------------------------------------
//----------------------------------
   if(IHaveticketBuy3>0 && IHaveticketSell4==0)
     {
      if(OrderSelect(IHaveticketBuy3,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY /*&& OrderMagicNumber()==MagicBUYSTOP2*/ && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
        {
         if(OrderSelect(IHaveticketSell2,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol()) //Выбераю ордер из истории по номеру тикета
           {

            double OpPriceSELL3=OrderOpenPrice();
            double StopLossSELL3=OrderStopLoss();
            double CenaTakeProfitSELL3=OrderTakeProfit();//TPSell_50persent

            if(IHaveticketSell4==0)
              {
               /*Sergio Ramos*/IHaveticketSell4=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer2_1,OpPriceSELL3,Slippage,StopLossSELL3,CenaTakeProfitSELL3,Coment,MagicSELLSTOP3,0,clrMediumOrchid);
               string textrevers="3";
               ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
               //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer3,2);
               //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
               //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL3,5));
               //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL3,5));
               //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL3,5));
               //string   filedummyshort="\\Images\\ImagesExpertBinWave\\short.bmp";
               //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

              }

           }

        }
     }
//------------------------------------------------

   if(IHaveticketSell3>0 && IHaveticketBuy4==0)
     {
      if(OrderSelect(IHaveticketSell3,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {
         if(OrderSelect(IHaveticketBuy2,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {

            double OpPriceBUY3=OrderOpenPrice();
            double StopLossBUY3=OrderStopLoss();
            double CenaTakeProfitBUY3=OrderTakeProfit();//TPBuy_50persent
            if(IHaveticketBuy4==0)
              {
               /*Sergio Ramos*/IHaveticketBuy4=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer2_1,OpPriceBUY3,Slippage,StopLossBUY3,CenaTakeProfitBUY3,Coment,MagicBUYSTOP3,0,clrLavender);
               string textrevers="3";
               ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
               // string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer3,2);
               //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
               //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY3,5));
               //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY3,5));
               //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY3,5));
               //string   filedummyshort="\\Images\\ImagesExpertBinWave\\long.bmp";
               //ObjectSetString(0,dummyshort,OBJPROP_BMPFILE,filedummyshort);

              }

           }

        }
     }
   if(threeout==false)
     {
      //------------------------------------------------
      if(IHaveticketBuy4>0 && IHaveticketSell5==0)
        {
         if(OrderSelect(IHaveticketBuy4,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
              {

               double OpPriceSELL5=OrderOpenPrice();
               double StopLossSELL5=OrderStopLoss();
               double CenaTakeProfitSELL5=OrderTakeProfit();

               if(IHaveticketSell5==0)
                 {
                  /*Varane*/ IHaveticketSell5=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer2,OpPriceSELL5,Slippage,StopLossSELL5,NULL,Coment,MagicSELLSTOP4,0,clrMediumOrchid);
                  string textrevers="4";
                  ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer4,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL5,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL5,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL5,5));

                 }

              }

           }
        }
      //------------------------------------------------
      //----------------------------------
      if(IHaveticketSell4>0 && IHaveticketBuy5==0)
        {
         if(OrderSelect(IHaveticketSell4,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
              {

               double OpPriceBUY5=OrderOpenPrice();
               double StopLossBUY5=OrderStopLoss();
               double CenaTakeProfitBUY5=OrderTakeProfit();
               if(IHaveticketBuy5==0)
                 {
                  /*Varane*/IHaveticketBuy5=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer2,OpPriceBUY5,Slippage,StopLossBUY5,NULL,"  ",MagicBUYSTOP4,0,clrLavender);
                  string textrevers="4";
                  ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer4,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY5,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY5,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY5,5));

                 }

              }

           }
        }

      //------------------------------------------------
      if(IHaveticketBuy5>0 && IHaveticketSell6==0)
        {
         if(OrderSelect(IHaveticketBuy5,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketSell2,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
              {

               double OpPriceSELL6=OrderOpenPrice();
               double StopLossSELL6=OrderStopLoss();
               double CenaTakeProfitSELL6=OrderTakeProfit();

               if(IHaveticketSell6==0)
                 {
                  /*Nacho*/ IHaveticketSell6=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer3_1,OpPriceSELL6,Slippage,StopLossSELL6,CenaTakeProfitSELL6,Coment,MagicSELLSTOP5,0,clrMediumOrchid);
                  string textrevers="5";
                  ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer5,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL6,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL6,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL6,5));

                 }

              }

           }
        }
      //------------------------------------------------
      //----------------------------------
      if(IHaveticketSell5>0 && IHaveticketBuy6==0)
        {
         if(OrderSelect(IHaveticketSell5,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketBuy2,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
              {

               double OpPriceBUY6=OrderOpenPrice();
               double StopLossBUY6=OrderStopLoss();
               double CenaTakeProfitBUY6=OrderTakeProfit();
               if(IHaveticketBuy6==0)
                 {
                  /*Nacho*/IHaveticketBuy6=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer3_1,OpPriceBUY6,Slippage,StopLossBUY6,CenaTakeProfitBUY6,Coment,MagicBUYSTOP5,0,clrLavender);
                  string textrevers="5";
                  ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer5,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY6,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY6,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY6,5));

                 }

              }

           }
        }

      //------------------------------------------------
      if(IHaveticketBuy6>0 && IHaveticketSell7==0)
        {
         if(OrderSelect(IHaveticketBuy6,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketSell1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
              {

               double OpPriceSELL7=OrderOpenPrice();
               double StopLossSELL7=OrderStopLoss();
               double CenaTakeProfitSELL7=OrderTakeProfit();

               if(IHaveticketSell7==0)
                 {
                  /*Ronaldo*/ IHaveticketSell7=OrderSend(Symbol(),OP_SELLSTOP,LotsVolumen*lotmultiplayer3,OpPriceSELL7,Slippage,StopLossSELL7,NULL,Coment,MagicSELLSTOP6,0,clrMediumOrchid);
                  string textrevers="6";
                  ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  //string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer6,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossSELL7,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitSELL7,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceSELL7,5));

                 }

              }

           }
        }
      //------------------------------------------------
      //----------------------------------
      if(IHaveticketSell6>0 && IHaveticketBuy7==0)
        {
         if(OrderSelect(IHaveticketSell6,SELECT_BY_TICKET) && OrderCloseTime()==0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
           {
            if(OrderSelect(IHaveticketBuy1,SELECT_BY_TICKET) && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
              {

               double OpPriceBUY7=OrderOpenPrice();
               double StopLossBUY7=OrderStopLoss();
               double CenaTakeProfitBUY7=OrderTakeProfit();
               if(IHaveticketBuy7==0)
                 {
                  /* Ronaldo */IHaveticketBuy7=OrderSend(Symbol(),OP_BUYSTOP,LotsVolumen*lotmultiplayer3,OpPriceBUY7,Slippage,StopLossBUY7,NULL,Coment,MagicBUYSTOP6,0,clrLavender);
                  string textrevers="6";
                  //ObjectSetString(0,Revers,OBJPROP_TEXT,textrevers);
                  string volumaument=DoubleToStr(LotsVolumen*lotmultiplayer6,2);
                  //ObjectSetString(0,dummyvolumen,OBJPROP_TEXT,volumaument);
                  //ObjectSetString(0,dummystoploss,OBJPROP_TEXT,DoubleToStr(StopLossBUY7,5));
                  //ObjectSetString(0,dummyclosepryce,OBJPROP_TEXT,DoubleToStr(CenaTakeProfitBUY7,5));
                  //ObjectSetString(0,dummyopenprice,OBJPROP_TEXT,DoubleToStr(OpPriceBUY7,5));

                 }

              }

           }
        }


     }


//---------Модификация данных в базе данных при потере
   if(IHaveticketBuy7>0)
     {
      if(OrderSelect(IHaveticketBuy7,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_BUY && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()>OrderClosePrice())
           {




            Alert(" LOSS ");

            if(WriteDatatuDB==1)
              {
               //body[ib,31]=7;//Тикеты
               //body[ib,32]=0;//Профит Лосс

               // -- записать в массив
               FileDelete(FileName6,0);

               int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
               if(file_handle6>0)
                 {

                  FileSeek(file_handle6,0,SEEK_CUR);

                 // FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                  FileClose(file_handle6);
                  Comment("Data is Writed - Tickets and Profit");
                 }
               else
                  Comment("Data is NOT Writed - Tickets and Profit");
              }


           }
        }
     }
//---------------------------Снятие второго ордера в случаи Профита первого---------------------------------------------------

   if(IHaveticketSell7>0)
     {
      if(OrderSelect(IHaveticketSell7,SELECT_BY_TICKET)==true && OrderCloseTime()!=0 && OrderType()==OP_SELL && OrderSymbol()==Symbol())
        {

         if(OrderOpenPrice()<OrderClosePrice())
           {




            Alert(" LOSS ");

            if(WriteDatatuDB==1)
              {
               //body[ib,31]=7;//Тикеты
               //body[ib,32]=0;//Профит Лосс

               // -- записать в массив
               FileDelete(FileName6,0);

               int file_handle6=FileOpen(FileName6,FILE_READ|FILE_WRITE|FILE_BIN);
               if(file_handle6>0)
                 {

                  FileSeek(file_handle6,0,SEEK_CUR);

                  //FileWriteArray(file_handle6,body,0,WHOLE_ARRAY);
                  FileClose(file_handle6);
                  Comment("Data is Writed - Tickets and Profit");
                 }
               else
                  Comment("Data is NOT Writed - Tickets and Profit");
              }


           }
        }
     }
//------------------------------------------------
  }//--END
//+------------------------------------------------------------------+

//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
bool IsNewBar()
  {
   static int nBars=0;
   if(nBars==0)
     {
      nBars=Bars;
      return(false);
     }
   if(nBars!=Bars)
     {
      nBars=Bars;
      return(true);
     }
   return(false);
  }
//+------------------------------------------------------------------+

//+------------------------------------------------------------------+
void BreakPoint()
  {
//It is expecting, that this function should work
//only in tester

//Press/release Pause button
//19 is a Virtual Key code of "Pause" button
//Sleep() is needed, because of the probability
//to misprocess too quick pressing/releasing
//of the button
   //keybd_event(19,0,0,0);
   //Sleep(10);

//keybd_event(19,0,2,0);
  }
//+------------------------------------------------------------------+
